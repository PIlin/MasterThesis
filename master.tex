\PassOptionsToPackage{english,main=ukrainian}{babel}
\documentclass[a4paper,ukrainian,utf8,nocolumnsxix,floatsection,equationsection]{eskdtext}


% \newcommand{\No}{\textnumero}

% no hyphenation & MS Word-style justification
% http://sumanta679.wordpress.com/2009/05/20/latex-justify-without-hyphenation/
\tolerance=1
\emergencystretch=\maxdimen
\hyphenpenalty=10000
\hbadness=10000

\usepackage[utf8]{inputenc}
\usepackage{cmap}
\usepackage[T2A]{fontenc}

\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{afterpage}
\usepackage{xspace}

\usepackage{todonotes}
% \usepackage[disable]{todonotes}
% \usepackage{showkeys}
\usepackage[unicode]{hyperref}

\usepackage{tabu}
\usepackage{longtable}
\usepackage{multirow}

\usepackage{cleveref}

%\usepackage{layouts}
% Use to probe lists
%\begin{figure}
% \currentlist
%% \listdiagram
%\listdesign
%\caption{List parameters}
%\end{figure}


\usepackage{cite}
% \usepackage{doi}


\usepackage{pdfpages}

\usepackage{pscyr}
\renewcommand{\rmdefault}{ftm}

% обычный размер всех инлайн-формул
\everymath{\displaystyle}

% заяпятая как дробній разделитель в числах
\usepackage{icomma}

% полуторный интервал
\usepackage{setspace}
\setstretch{1.5}

\setlength{\parindent}{1.25cm}

\usepackage{adjustbox}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows}
\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}


% float per page amount settings
\renewcommand\floatpagefraction{0.9}
\renewcommand\topfraction{1}
\renewcommand\bottomfraction{1}
\renewcommand\textfraction{0}   
\setcounter{totalnumber}{50}
\setcounter{topnumber}{50}
\setcounter{bottomnumber}{50}



% subfig settings
\usepackage{subfig}
\renewcommand{\thesubfigure}{\asbuk{subfigure}}
\captionsetup[subfigure]{labelformat=simple}



% titlesec settings
\newlength{\normalparindent}
\AtBeginDocument{\setlength{\normalparindent}{\parindent}}

\usepackage[explicit]{titlesec}
\titleformat{\section}{\centering\normalfont}{\thesection}{0.4em}{\MakeUppercase{#1}}
\titleformat{\subsection}[block]{\normalfont}{\hspace*{\normalparindent}\thesubsection}{0.4em}{#1}
\titleformat{\subsubsection}[block]{\normalfont}{\hspace*{\normalparindent}\thesubsubsection}{0.4em}{#1}

\def\sectSkipVal{4.1ex}     % magic number
\titlespacing{\section}{0pt}{\sectSkipVal}{\sectSkipVal}
\titlespacing{\subsection}{0pt}{\sectSkipVal}{\sectSkipVal}
\titlespacing{\subsubsection}{0pt}{\sectSkipVal}{\sectSkipVal}
% начать каждую секцию с новой строки
\newcommand{\sectionbreak}{\clearpage}
% end titlesec settings

% figure spacing

\setlength{\textfloatsep}{\sectSkipVal}
\setlength{\intextsep}{\sectSkipVal}

% end figure spacing


% figure caption style

\DeclareCaptionFormat{figureLongCaptionFormat} {\hspace*{\normalparindent}#1#2#3}
\DeclareCaptionStyle{figureLongCaption}[]{justification=justified,format=figureLongCaptionFormat,font={stretch=1.5}, labelsep=dash,singlelinecheck=false,aboveskip=0mm,belowskip=3mm}
\newcommand{\longcaption}[1]{\captionsetup{style=figureLongCaption}\caption{#1}}

\captionsetup[figure]{%
labelsep=dash,justification=centering,singlelinecheck=false,%
aboveskip=0mm,belowskip=3mm, font={stretch=1.5}}



% end figure caption style


% toc settings
\usepackage[subfigure]{tocloft}
\renewcommand{\cfttoctitlefont}{\hfil \MakeUppercase} % center title, font
% entry indents
\renewcommand{\cftsecindent}{0em}
\renewcommand{\cftsubsecindent}{0em}
\renewcommand{\cftsubsubsecindent}{0em}

\renewcommand{\cftbeforesecskip}{0em}       % no skip before section 
\renewcommand{\cftsecfont}{}                % no bold section
\renewcommand{\cftsecleader}{\cftdotfill{\cftsecdotsep}} % dots are not bold
\renewcommand{\cftsecdotsep}{\cftdotsep}    % dots for section
\renewcommand{\cftsecpagefont}{}

% no-indent second line of large entries
% http://tex.stackexchange.com/a/28348/31897
\setlength{\cftsecnumwidth}{0em}
\renewcommand{\cftsecaftersnumb}{\hspace{0.8em}}
\setlength{\cftsubsecnumwidth}{0em}
\renewcommand{\cftsubsecaftersnumb}{\hspace{1.5em}}
\setlength{\cftsubsubsecnumwidth}{0em}
\renewcommand{\cftsubsubsecaftersnumb}{\hspace{2.3em}}

% end toc settings

% list settings
\usepackage{enumitem}
% \setlist{nolistsep, leftmargin=0em, itemindent=\labelwidth}
\setlist{nolistsep, leftmargin=0em, itemindent=1.85cm}
\AddEnumerateCounter{\Asbuk}{\@Asbuk}{\CYRM}
\AddEnumerateCounter{\asbuk}{\@asbuk}{\cyrm}
% end list settings


% bibliography list settings
\usepackage{etoolbox}
\patchcmd{\thebibliography}
  {\advance\leftmargin\labelsep}
  {\leftmargin=0pt\itemindent=1.85cm}
  {}{}

% end bibliography list settings


% \ESKDdepartment{Одеський національний політехнічний університет}
% \ESKDcompany{завод имени И.~А.~Лихачева}
% \ESKDclassCode{31 1398}
\ESKDtitle{Дослідження та розробка протоколів бездротових мереж на основі стандарту IEEE 802.15.4 для управління елементами медіафасаду}
% \ESKDdocName{}
\ESKDsignature{ІС ДР 8.05010101 001 ПЗ}
\ESKDauthor{Ільїн~П.~О.}
\ESKDchecker{Бровков В. Г.}
\ESKDnormContr{Бабілунга\hspace{.15em}О\hspace{-.1em}.Ю\hspace{-.1em}.}
\ESKDapprovedBy{Антощук С. Г.}
\ESKDcolumnIX{ОНПУ, ІКС, каф. ІС}

% фікси до eskd


% поля в штампе
% тема
\let\stdESKDtheColumnI\ESKDtheColumnI
\renewcommand\ESKDtheColumnI{\small\stdESKDtheColumnI}
% шифр
\let\stdESKDtheColumnII\ESKDtheColumnII
\renewcommand\ESKDtheColumnII{\normalsize\stdESKDtheColumnII}
% аркуш
\renewcommand\ESKDcolumnVIIname{Арк.}
% наимен. предпр.
\let\stdESKDtheColumnIX\ESKDtheColumnIX
\renewcommand\ESKDtheColumnIX{\normalsize\stdESKDtheColumnIX}

\renewcommand\paragraph{\subsubsection}

% секція без номера, але в TOC
\newcommand{\sectionnonum}[1]{\section*{#1}\addcontentsline{toc}{section}{#1}}

% 
\newcommand{\todoi}[1]{\todo[inline]{#1}}
\newcommand{\figref}[1]{рис.~\ref{#1}}

\newcommand{\iee}[0]{IEEE~802.15.4\xspace}
\newcommand{\csma}[0]{CSMA/CA\xspace}
\newcommand{\ucsma}[0]{unslotted \csma\xspace}
\newcommand{\scsma}[0]{slotted \csma\xspace}
\newcommand{\blm}[0]{beacon-less\xspace}
\newcommand{\bem}[0]{beacon-enabled\xspace}

\newcommand{\engtxt}[1]{\foreignlanguage{english}{#1}}

% 
\newcommand{\col}[2]{\multicolumn{1}{#1}{#2}}


\begin{document}
% \selectlanguage{ukrainian}


% \maketitle
\ESKDthisStyle{empty}
\includepdf[pages={1}]{titul/titul.pdf}

\includepdf[pages={1}]{titul/task1.pdf}

\includepdf[pages={1}]{titul/task2.pdf}

\ESKDthisStyle{formII}
% no page number on toc page: http://tex.stackexchange.com/a/2996/31897
\addtocontents{toc}{\protect\thispagestyle{empty}} 
\tableofcontents

% \newpage

\sectionnonum{Вступ}
\label{sec:intro}

Останні роки відбувається помітний розвиток у галузі медіафасадів, міських екранів (urban screens) та міських медіа (urban media). Попередні роки існувала невірна думка, що медіафасади~--- це всього лиш еволюція звичайних рекламних щитів, що це високо технологічні системи, які використовуються лише для доставки високоякісної реклами. Звісно, таке використання медіафасадів залишається одним з найбільш популярних. І все ж таки, можна стверджувати, що системи медіафасадів~--- це не лише рекламні площадки. 

По-перше, окрім рекламної функції, медіафасади і міські екрани виконують в сучасних містах іншу інформаційну функцію. Екрани використовуються у якості інформаційних табло для сповіщення населення міста. Наприклад, сповіщення про графік руху громадського транспорту. Об'єднані в єдину інформаційну мережу, подібні екрани надають місту інтелектуальність і покращують життя мешканців міста. Із ростом комп'ютеризації та інформатизації громадських служб можна очікувати збільшення кількості прикладів використання систем медіафасадів для покращення якості життя у місті.

По-друге, початково утилітарні системи медіафасадів стали достатньо простими і розповсюдженими, щоб припасти до уваги митців. Поєднання інформаційних технологій та архітектури, скульптури, живопису роблять міський пейзаж красивим та яскравим. У світі є достатньо прикладів об'єктів архітектури, що були з самого початку розроблені так, щоб бути нерозривно пов'язаними із встановленою системою медіафасаду, яка створена виключно із мистецьких міркувань. 

Таким чином, можна очікувати, що розвиток систем медіафасадів буде продовжуватися, відкриваючи нові напрямки і способи використання нових технологій.  

Цікавим є один з напрямків розвитку систем медіафасадів, який стоїть на перетині із іншою очікуваною концепцією майбутнього повсякденних технологій~--- Інтернету речей (Internet of Things). Стан сьогоднішніх технологій й економічні обставини є такими, що більшість (якщо не усі) систем міських медіа є великими стаціонарними об'єктами. На відміну від "<класичних"> медіафасадів можна уявити систему ad-hoc медіафасаду, яка може характеризуватися наступними характеристиками: мобільність, розподіленість, висока швидкість розгортання, інтерактивність, легкість використання. Використання подібної системи може мати сенс у областях культури, мистецтва, навчання, тощо.

Подібна система ad-hoc медіафасаду розглядалася у моєму попередньому докладі \cite{idaacs:2013:adhoc:media:facade}, що був представлений на конференції IDAACS 2013 у місті Берлін, Німеччина. Та робота пропонує концепцію та загальну архітектуру системи, наводить вимоги до технологій. Одним з найбільш важливих елементів системи є канал зв'язку для управління елементами розподіленої системи. В роботі пропонується використання мереж стандарту \iee для організації каналу зв'язку в системі. Ця робота присвячена розвитку ідей, що були покладені у попередньому докладі.

Метою цієї роботи є розробка та дослідження протоколів бездротових мереж на основі стандарту \iee для управління елементами індикації медіафасаду.

Для досягнення мети необхідно вирішити наступні задачі:
\begin{enumerate}
	\item провести аналіз сучасного стану технологій, що використовуються в системах контролю медіафасадів;
	\item провести аналіз існуючих технологій бездротового зв'язку;
	\item провести аналіз стандарту бездротових мереж \iee;
	\item розробити мережеві протоколи взаємодії в системі управління елементами індикації медіафасаду;
	\item\label{task:create_model} програмно реалізувати модель бездротової мережі системи управління елементами індикації медіафасаду;
	\item\label{task:do_simulation} дослідити характеристики розробленої мережі, використовуючи програмну модель.
\end{enumerate}

Об'єкт дослідження: канал зв'язку на основі стандарту \iee в системі управління елементами індикації медіафасаду.

Предмет дослідження: зменшення латентних затримок та збільшення пропускної здатності за рахунок використання особливостей трафіка та стандарту \iee.

Науково-практична цінність дослідження полягає в тому, що розроблені протоколи відкривають можливість побудування систем медіафасадів із використанням простіших та дешевших пристроїв.

Дипломна робота складається із п'яти розділів.

У першому розділі проведено аналіз сучасного стану проблеми побудування систем медіафасадів і їх контролю, розглянуті технології бездротового зв'язку, моделювання мереж, визначені технології, що будуть використатися, та напрямки рішення поставлених проблем.

У другому розділі детально розглядається стандарт бездротових мереж \iee. Визначені ключові особливості мереж зазначеного стандарту, що були використані при розробці протоколів.

У третьому розділі розглянута архітектура системи ad-hoc медіафасаду і типи трафіку, що використовується в системі для контролю Клієнтів візуалізації; розглянуті два можливих сценарії трафіка і запропоновані режими роботи і протоколи доступу до мережі; проведена оцінка розміру мережі, що може бути підтримана, та наведені шляхи її збільшення.

У четвертому розділі розроблена програмна модель бездротової мережі управління елементами індикації медіафасаду; шляхом моделювання досліджена поведінка мережі у при різних розмірах та навантаженні; проведена оцінка придатності до застосування запропонованих режимів роботи та протоколів доступу до мережі.

В п'ятому розділі розглянуто питання охорони праці та безпеки в надзвичайних ситуаціях.

\section{Аналіз сучасного стану проблеми управління елементами медіафасаду}
\label{sec:1}

\subsection{Вимоги до мережі управління медіафасадами} 

Сучасні технології надають інженерам та дизайнерам великий вибір засобів для створення інтерактивних систем і об'єктів мистецтва. Зазвичай, складно створити деяку систему класифікації таких систем, яка б дозволяла виключно віднести одну чи іншу інсталяцію до визначеного типу. Замість цього, у роботі \cite{media:facades:fundamentals} Tscherteu та Leeb наводять технічні характеристики систем візуалізації. С точки зору побудови мережі управління системою інсталяції, найбільш важливими характеристиками є наступні:

\begin{itemize}
	\item технологія відображення;
	\item характеристики якості зображення (роздільна здатність зображення, кольорова спроможність, розмір, тощо);
	\item кількість окремих кінцевих елементів;
	\item постійність (тривалість) використання;
	\item інтерактивність;
	\item стійкість і енергоспоживання.
\end{itemize}

Зазвичай, системи управління медіафасадами є централізованими. Мережі управління будуються таким чином, щоб організувати централізоване управління багатьма кінцевими елементами. Мережі статичні, тобто склад елементів не змінюється після розгортання системи. Оскільки розгорнуті системи статичні, для організації каналу зв'язку між керуючим пристроєм та кінцевими вузлами зазвичай використовуються кабелі. Використання кабелів також дозволяє об'єднати мережеву інфраструктуру системи із інфраструктурою енергопостачання. У системах, що створюють зображення високої якості (наприклад, із великою роздільною здатністю), є потреба використання каналів зв'язку із широкою полосою пропускання. Використання кабелів, у такому випадку, є виправданим.

Система ad-hoc медіафасаду (див. \cite{idaacs:2013:adhoc:media:facade}) має важливі особливості, порівняно із класичною системою медіафасаду. Потреба у мобільності та високої швидкості розгортання робить використання бездротових каналів зв'язку більш привабливим з точки зору дизайну та досвіду користувача. Також, мережа може бути не статичною, із змінною топологією та змінним складом кінцевих елементів. Але, система управління ad-hoc медіафасадом залишається централізованою. Керуючий пристрій повинен управляти багатьма мобільними кінцевими елементами. В залежності від характеристик кінцевих вузлів мережі, може виникнути потреба у широкій полосі пропускання каналу зв'язку. 

Всі ці особливості повинні бути зауважені при виборі технології бездротового зв'язку, що буде використовувана для побудування мережі системи управління елементами медіафасаду.


\subsection{Огляд технологій бездротового зв'язку}

Протягом останніх 10-20 років була розроблена велика кількість різноманітних стандартів та технологій для систем, які потребують бездротового зв'язку. Оскільки коло задач дуже широке і потреби систем відрізняються, розроблені стандарти часто вирішують різні задачі або пропонують рішення одних й тих самих задач різними методами. Розглянемо декілька доступних технологій і оцінимо їх придатність для використання в системі управління елементами індикації медіафасаду. Огляд та порівняння підготовлено за матеріалами \cite{comparative:wireless:protocols} та \cite{garcia2008:problem:solving}.

Далі будуть наведені деякі відомості про доступні технології бездротового зв'язку.

\paragraph{Огляд технології Bluetooth} % (fold)
\label{par:bluetooth_bluetooth_low_energy}

Технологія Bluetooth використовується для обміну даними між Bluetooth-спроможними пристроями в персональних радіомережах \cite{garcia2008:problem:solving}. Призначення технології~--- об'єднання мобільних персональних побутових пристроїв у малі мережі із малою пропускною спроможністю. Найбільша пропускна спроможність самого каналу Bluetooth досягнута в специфікації версії 2.1 \cite{bluetooth:core:spec:2_1} і становить 3 Мбіт/с.

Технологія розробляється групою компаній Bluetooth Special Interest Group (Bluetooth SIG). З 2002 по 2005 діяла робоча група IEEE 802.15.1 по стандартизації технології, але на даний момент робота групи припинена і розробка специфікацій ведеться під контролем SIG.


\paragraph{Огляд технології Wi-Fi} % (fold)
\label{par:wi_fi}

Wi-Fi~--- це одна з найрозповсюдженіших технологій бездротового цифрового зв'язку \cite{garcia2008:problem:solving}. Wi-Fi призначена для поєднання різноманітних цифрових пристроїв у локальну мережу через бездротовий канал зв'язку. Технологія теоретично дозволяє об'єднувати у мережу тисячі пристроїв і підтримує канали із великою пропускною спроможністю. Найвища пропускна спроможність за однією із останніх та найбільш актуальних версій стандарту IEEE~802.11n-2009 є від 150 Мбіт/с до 600 Мбіт/с \cite{comparative:wireless:protocols}.

Розробка технології проводиться у робочій групі IEEE 802.11 за підтримкою організації Wi-Fi Alliance. Перша версія стандарту технології була опублікована у 1997 році. У подальшому, робочою групою було опубліковано декілька десятків виправлень та доповнень до базового стандарту і активна розробка продовжується.

\paragraph{Огляд технології UWB} % (fold)
\label{par:uwb}

UWB~--- це набір стандартів бездротових персональних радіомереж із великою пропускною спроможністю~--- HR-WPAN (High Rate Wireless Private Area Network) \cite{comparative:wireless:protocols}. Призначення технології UWB східне із призначенням Bluetooth~--- об'єднання  персональних побутових пристроїв у малі мережі, але дуже велика пропускна спроможність дозволяє використання технології у системах доставки медіаконтенту (телевізори, проектори, відеоплеєри, ігрові пристрої, тощо).

Розробка стандарту проводилася робочою групою IEEE~802.15.3 за підтримкою організацій UWB Forum та WiMedia Alliance. У 2003 році робочою групою був опублікований стандарт IEEE~802.15.3-2003 що описував MAC та PHY рівні для HR-WPAN. У подальшому в 2005 та 2009 роках були опубліковані доповнення до стандарту. У 2009-2010 роботи по розробці стандарту було припинено і дії організації WiMedia Alliance було припинено.

\paragraph{Огляд технології \iee}
\label{par:iee}

\iee~--- це технологія для бездротових персональних радіомереж із низькою пропускною спроможністю~--- LR-WPAN (\engtxt{Low Rate Wireless Private Area Network}) \cite{comparative:wireless:protocols}. Найбільше застосування технологія знайшла у бездротових сенсорних мережах (Wireless Sensor Networks --- WSN) та системах автоматизації <<розумних домів>> через свої низькі потреби до пристроїв, які її використовують, та виключні характеристики енергоефективності. Технологія теоретично дозволяє об'єднувати у мережу тисячі пристроїв, але, на відміну від Wi-Fi, забезпечує обмежену пропускну спроможність. 

Розробка стандарту технології проводиться робочою групою \iee. Перша версія стандарту була опублікована в 2003 році. Остання ревізія стандарту була опублікована у 2011 році. Стандарт лежить в основі специфікацій технологій ZigBee \cite{zigbee:core:spec}, WirelessHART \cite{wihart:zigbee:comparison} та декількох інших.

\subsection{Зведене порівняння технологій бездротового зв'язку}
\label{sub:network:tech:comparison}

В таблиці \ref{tbl:wireless_tech_comparison} наведено зведене порівняння основних розбіжностей технологій, що були оглянуті вище у підрозділах \labelcref{par:bluetooth_bluetooth_low_energy,par:wi_fi,par:uwb,par:iee}. Кожна технологія базується на стандарті IEEE. Wi-Fi та UWB забезпечують більшу пропускну спроможність, ніж Bluetooth та \iee. Wi-Fi призначений для встановлення бездротових локальних мереж. UWB, Bluetooth та \iee призначені діяти в WPAN-мережах.

\begin{table}[htbp]
\caption{Зведене порівняння оглянутих технологій бездротового зв'язку}
\newcommand{\ccolt}[1]{\multirow{1}{0.1725\textwidth}{\centering #1}}
\begin{tabular}{|p{0.19\textwidth}|p{0.1725\textwidth}|p{0.1725\textwidth}|p{0.1725\textwidth}|p{0.1725\textwidth}|}
\hline
\multirow{2}{0.19\textwidth}{\centering Назва характеристики} & \multicolumn{4}{c|}{Технологія} \\ \cline{2 - 5}
                                                              & \ccolt{Bluetooth}               &  \ccolt{Wi-Fi}                                          & \ccolt{UWB}                & \ccolt{IEEE 802.15.4}     \\ \hline
Специфікація                                                  & IEEE 802.15.1 	                 &  IEEE 802.11g                                           & IEEE 802.15.3              & IEEE 802.15.4             \\ \hline
Частотний діапазон, ГГц                                       & \ccolt{2,4}                     &  \ccolt{2,4; 5}                                         & \ccolt{3,168-10,56; 57-66} & \ccolt{0,868; 0,915; 2,4} \\ \hline
Номінальна пропускна спроможність, Мбіт/с                        & \ccolt{1-3}                     &  \ccolt{54-600}                                         & \ccolt{110-5750}           & \ccolt{0,25}              \\ \hline
Дальність, м                                                  & \ccolt{1-100}                   &  \ccolt{35-100}                                         & \ccolt{ 1-10}              & \ccolt{10-100}            \\ \hline
Кількість каналів                                             & \ccolt{79}                      &  \ccolt{14}                                             & \ccolt{1-15}               & \ccolt{27}                \\ \hline
Максимальна кількість вузлів                                  & \ccolt{8}                       &  \ccolt{2007}                                           & \ccolt{8}                  & \ccolt{Більш 65530}       \\ \hline
Базова топологія мережі                                       & Piconet                         &  BSS                                                    & Piconet                    & Зірка                     \\ \hline
Розширена топологія мережі                                    & Scatternet                      &  ESS                                                    & Peer to Peer               & Mesh, cluster tree        \\ \hline
Механізм співіснування                                        & Адаптивна зміна частоти         &  Динамічний вибір частоти, контроль потужності передачі & Адаптивна зміна частоти    & Динамічний вибір частоти  \\ \hline

\end{tabular}

\label{tbl:wireless_tech_comparison}

\end{table}


% \todoi{full diapasons}

Технології Bluetooth та IEEE 802.15.3 UWB використовують у якості базової топології мережі Piconet, яка значна обмежує кількість пристроїв, що можуть діяти в мережі. Таким чином, ці технології не підходять для задачі створення мережі управління елементами візуалізації медіафасаду. Залишаються технології Wi-Fi та \iee. 

Найчастіше, технологія \iee використовуються для створення бездротових сенсорних мереж. Підставою до цього є простота використання пристроїв, енергоефективність. Такі самі вимоги є важливими при створенні системи ad-hoc медіафасаду. Енергоефективність пристроїв на базі \iee суттєво збільшить простоту використання та мобільність вузлів системи. Малу пропускну спроможність можна компенсувати інтелектуальним контролем полоси пропускання.

З цих причин, будемо використовувати мережу стандарту \iee в системі управління вузлами візуалізації в мережі медіафасаду.



% section аналіз_сучасного_стану_проблеми_контроля_елементів_медіафасадів (end)

\subsection{Аналіз особливостей стандарту технології \iee}
\label{sub:ieee:standard:analysis}

В підрозділі \ref{sub:network:tech:comparison} для побудови радіомережі в системі управління елементами ad-hoc медіафасаду була вибрана технологія радіомереж на базі стандарту \iee. Для того, щоб можна було приступити до розробки протоколу прикладного рівня, необхідно розглянути можливості, що забезпеченні стандартом \iee.

У цьому підрозділі розглядається стандарт \iee, можливості що ним підтримуються та режими роботи, що можуть бути використані при розробці протоколу управління елементами індикації медіафасаду. 

\paragraph{Загальна характеристика мереж технології \iee}
\label{par:ieee:standard}


Стандарт \iee зосереджується на низько швидкісному, мало складному, енерго-ефективному бездротовому радіозв'язку серед пристроїв. Деякі з найбільш важливих особливостей стандарту, що можуть бути використані при розробці протоколу управління елементами індикації медіафасаду, є:
\begin{itemize}
	\item підтримка мережевих топологій "<зірка"> та "<Peer-to-Peer">;
	\item використання алгоритму \csma (\engtxt{Carrier Sense Multiple Access with Collision Avoidance}~--- множинний доступ з контролем несучої і униканням колізій);
	\item підтримка необов'язкового режиму доставки у реальному часі із використанням GTS (Guaranteed Time Slots~--- гарантованих  часових інтервалів);
	\item низькі вимоги до рівня споживання енергії;
	\item контроль споживання енергії за допомогою LQI (Link Quality Indication~--- показник якості зв'язку) та ED (Energy Detection~--- виявлення енергії).
\end{itemize}

Типово, пристрої \iee працюють в персональному просторі розміром 10 метрів чи менше, але робоча дальність залежить від обраного апаратного забезпечення і може досягати десятків та сотень метрів.

Стандартом підтримується декілька різних діапазонів радіочастот та форматів модуляції. Перша версія стандарту зазначала підтримку трьох діапазонів 2,4 ГГц, 915 МГц та 868 МГц із групи діапазонів ISM (Industrial, Scientifical and Medical radio bands~--- промислові, наукові та медичні діапазони радіочастот), які не підлягають ліцензуванню у більшості країн. Подальші версії стандарту додали інші діапазони та методи модуляції. Повний список, згідно до поточного стандарту, наведено у таблиці \ref{tbl:supported:phy:iee}.

\begin{table}[htbp]
	\caption{Список рівнів PHY, що підтримуються стандартом \iee}
	\begin{tabu}{|p{0.42\textwidth}|>{\centering}p{0.18\textwidth}|p{0.15\textwidth}|>{\centering}p{0.15\textwidth}|}
	% \begin{tabu} to \textwidth{ |l|X|l|X| }
		\hline
		\col{|c|}{Назва рівню PHY}                & Частотний діапазон, МГц      & \col{c|}{Модуляція}    & Пропускна спроможність, Кбіт/с \\ \hline
		780                                       & 779-787                      & O-QPSK                 & 250                         \\ \hline
		780                                       & 779-787                      & MPSK                   & 250                         \\ \hline
		\multirow{2}{*}{868/915}                  & 868-868,6                    & BPSK                   & 20                          \\ \cline{ 2- 4}
		                                          & 902-928                      & BPSK                   & 40                          \\ \hline
		\multirow{2}{*}{868/915 (необов'язково)}  & 868-868,6                    & ASK                    & 250                         \\ \cline{ 2- 4}
		                                          & 902-928                      & ASK                    & 250                         \\ \hline
		\multirow{2}{*}{868/915 (необов'язково)}  & 868-868,6                    & O-QPSK                 & 100                         \\ \cline{ 2- 4}
		                                          & 902-928                      & O-QPSK                 & 250                         \\ \hline
		950                                       & 950-956                      & GFSK                   & 100                         \\ \hline
		950                                       & 950-956                      & BPSK                   & 20                          \\ \hline
		2450 DSSS                                 & 2400-2483,5                  & O-QPSK                 & 250                         \\ \hline
		UWB subgigahertz (необов'язково)          & 250-750                      & BPM-BPSK               & ---                         \\ \hline
		\multirow{2}{*}{2450 CSS (необов'язково)} & \multirow{2}{*}{2400-2483,5} & \multirow{2}{*}{DQPSK} & 250                         \\ \cline{ 4- 4}
		                                          &                              &                        & 1000                        \\ \hline
		UWB low band (необов'язково)              & 3244-4742                    & BPM-BPSK               & ---                         \\ \hline
		UWB high band (необов'язково)             & 5944-10234                   & BPM-BPSK               & ---                         \\ \hline
	\end{tabu}
	\label{tbl:supported:phy:iee}
\end{table}


Діапазони частот поділені на канали. Нумерація каналів проводиться за допомогою номерів каналів та сторінок каналів. Діапазони, що були використані у першій версії стандарту, віднесені до сторінки каналів 0. До цієї сторінки відносяться 27 каналів: 
\begin{itemize}
	\item 1 канал в діапазоні 868 МГц $(k = 0)$;
	\item 10 каналів в діапазоні 915 МГц $(k = 1, \dots, 10)$;
	\item 16 каналів в діапазоні 2,4 ГГц $(k = 11, \dots, 26)$.
\end{itemize}

Рівні PHY, що додавалися пізніше, починали нумерацію каналів на інших сторінках.

\iee підтримує два типи пристроїв: FFD (Full-Function Device~--- повнофункціональний пристрій) та RFD (Reduced-Function Device~--- пристрій із зниженою функціональністю). RFD пристрої призначені для використання у дуже простих випадках і здібні асоціюватися лише із одним FFD. Це дозволяє втілити RFD пристрій при дуже обмеженому обсязі пам'яті, обчислювальної потужності та запасів енергії. Кожна мережа повинна містити як найменш один FFD пристрій. 

Залежно від прикладної задачі, \iee мережа може мати топологію "<зірка"> чи "<Peer-to-Peer">. 

Обидва типи мереж повинні мати один спеціальний пристрій~--- PAN-координатор. PAN-координатор створює мережу, дозволяє іншим пристроям асоціювати себе із мережею та контролює доступ пристроїв до мережі у випадку використання режиму роботи \bem. Тільки FFD пристрій може стати PAN-координатором.

Головна різниця між мережевими топологіями полягає у напрямках комунікації, що підтримуються. Мережа-зірка підтримує комунікацію лише між PAN-координатором та асоційованим пристроєм. Peer-to-Peer мережа дозволяє довільні сполучення між усіма асоційованими пристроями.

Стандарт \iee визначає два режими роботи:
\begin{itemize}
	\item режим \blm (режим роботи без beacon та із використанням алгоритму \ucsma);
	\item режим \bem (режим роботи із beacon та із використанням алгоритму \scsma).
\end{itemize}

Особливості цих режимів роботи доцільно враховувати при розробці мережевих протоколів.

\paragraph{Режим роботи мережі \blm}

У мережі, яка діє в режимі \blm, усі пристрої використовують алгоритм \ucsma.

\csma~--- це алгоритм, який використовується для контролю часу передачі в мережі, яка складається із множини пристроїв (\figref{fig:csma-ca}).

\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.7\textwidth]{img/csma-ca.pdf}
	\caption{\label{fig:csma-ca}Узагальнена блок-схема алгоритму \ucsma}
\end{figure}


Пристрої використовують контроль несучої для того, щоб визначити період часу, коли канал «вільний» і протягом котрого можливо передати інформацію. Таким чином пристрій намагається уникнути колізії. Звісно, цілком можливий випадок, коли два пристрої вирішать почати передачу  одночасно протягом одного  «вільного» періоду. Для того, щоб зменшити ймовірність цього випадку, використовується механізм випадкових періодів затримки (random back-off delay) перед початком передачі. Випадкові затримки збільшують ймовірність успішного несумісного захвату каналу одним пристроєм.

При використанні алгоритму \ucsma, періоди затримки різних пристроїв не синхронізовані один з одним. Кожен пристрій починає відраховувати випадковий період затримки і передачу самостійно. Всі пристрої конкурують один з іншим за право використання каналу зв'язку. 

% \clearpage

\paragraph{Режим роботи мережі \bem}
\label{par:beacon:enabled:mode}

\iee визначає додатковий, необов'язковий режим роботи мережі \bem. При використанні цього режиму роботи, усі передачі даних у мережі проводяться протягом встановлених періодів часу, які звуться superframes. 

Кожен superframe складається із чотирьох частин (\figref{fig:superframe}):

\begin{itemize}
	\item beacon~--- маячок, обов'язковий;
	\item contention access period (CAP)~--- період конкурентного доступу, обов'язковий;
	\item contention free period (CFP)~--- період без конкурентного доступу, необов'язковий;
	\item inactive~--- період неактивності, необов'язковий.
\end{itemize}

\begin{figure}[htbp]
	\centering
	\includegraphics[width=\textwidth]{img/superframe.pdf}
	\caption{\label{fig:superframe}Схема superframe}
\end{figure}

PAN-координатор передає кадр beacon на початку кожного superframe. Інші учасники мережі використовують отриманий beacon для того, щоб синхронізуватися із координатором. Також beacon використовується для доставки опису структури поточного superframe та іншої загальної інформації про мережу. 

Безпосередньо слідом за кадром beacon починається період CAP. Протягом цього періоду усі асоційовані вузли в мережі використовують алгоритм \scsma. Алгоритм \scsma є модифікацією алгоритму \ucsma. Пристрої так само конкурують за право передачі. Зміна полягає у наступному: якщо передача не може бути закінчена цілком до кінця періоду CAP, тоді вона взагалі не буде проведена протягом поточного періоду CAP. Замість цього передача буде відкладена до наступного періоду CAP. 

Якщо PAN-координатор вирішив на початку superframe, що той повинен містити необов'язковий період CFP, тоді CFP починається після закінчення періоду CAP. Координатор поділяє період CFP на гарантовані часові інтервали (GTS). Якщо пристрій бажає передати інформацію протягом періоду CFP, він повинен отримати дозвіл на це від PAN-координатора за допомогою службової команди GTS Request. Дозвіл від координатора отримується протягом періоду CAP. Якщо дозвіл отримано, пристрій має виключне право на використання призначеного йому інтервалу GTS. Таким чином, протягом інтервалу GTS алгоритм \csma не використовується. Але, звісно, пристрій зобов'язаний дотримуватися границь інтервалу GTS. 

Необов'язковий період inactive може бути назначений PAN-координатором для того, щоб пристрої могли перейти до сплячого енергозберігаючого режиму. Період неактивності починається після періоду CFP (чи CAP, якщо CFP у поточному superframe відсутній) і завершується із завершенням поточного superframe.

Негайно із завершенням поточного superframe починається наступний superframe. 

\paragraph{Оцінка пропускної спроможності}
\label{par:throughput:evaluation}

Декілька досліджень було проведено для оцінки характеристик мереж на основі стандарту \iee, таких як максимальна пропускна спроможність, мінімальна та максимальна затримка доставки. Дослідники використовували різноманітні підходи: теоретичні розрахунки, експерименти за допомогою моделювання математичних моделей мереж чи за допомогою справжніх мереж.

Алгоритм \ucsma та режим роботи \blm у мережах стандарту \iee був досліджений у~\cite{thoroughput:analysis:unslotted:ieee}. Цій дослід стверджує, що режим роботи \blm має меншій рівень накладних витрат, ніж режим роботи \bem, і тому дозволяє досягти найбільшої пропускної спроможності. У досліді пропонуються аналітичні формули для оцінки значень пропускної спроможності та затримки доставки. Коректність запропонованих формул була перевірена експериментально.

Дослід~\cite{thoroughput:analysis:unslotted:ieee} пропонує оцінювати корисну пропускну спроможність як функцію від розміру корисного навантаження кадру (\figref{fig:throughput_graph}):
\begin{equation}\label{eq:throughput}
	R(p) = \frac{8p}{ap + b} \text{ ,}
\end{equation}

де $p$~--- розмір корисного навантаження кадру;

$a,b$~--- параметри, що залежать від робочої частоти, режиму адресації та інших параметрів. Параметр $a$ виражає затримку, необхідну для відправки 1 байту, параметр $b$~--- накладні витрати протоколу на відправку одного кадру.

За допомогою розрахунків встановлено, що верхня межа корисної пропускної спроможності в мережі, яка використовує 16 біт для адресування, сягає рівню 151 Кбіт/с із відключеним механізмом підтверджень чи рівню 139 Кбіт/с~--- із включеним. Із зменшенням розміру корисного навантаження кадру, корисна пропускна спроможність також зменшується. Розмір заголовку кадру і, відповідно, можливий розмір корисного навантаження, змінюється відповідно до обраного режиму адресування та параметрів безпеки. Тобто, максимальна корисна пропускна спроможність залежить від обраних параметрів мережі.

\begin{figure}[bth]
	\centering
	\includegraphics[width=0.7\textwidth]{img/throughput_graph.png}
	\longcaption{\label{fig:throughput_graph}Корисна пропускна спроможність як функція корисного навантаження, режиму адресування та настройок підтвердження доставки}
\end{figure}

Експерименти, що були проведені у досліді~\cite{thoroughput:analysis:unslotted:ieee}, показують стабільну різницю між оціненою та експериментально виміряною корисною пропускною спроможністю. Виміряна корисна пропускна спроможність була десь на 11\% нижче за очікувану, тобто максимально досягнута пропускна спроможність становила біля 123 Кбіт/с.

Протягом практики мною були проведені власні експерименти по вимірюванню корисної пропускної спроможності мереж \iee. Вимірювальні пристрої були побудовані на базі Arduino Leonardo та прийомо-передавачів MRF24J40MA. Експериментально виміряна корисна пропускна спроможність встановила 110 кбіт/с. Цей результат добре відповідає результатам, що були отримані у~\cite{thoroughput:analysis:unslotted:ieee}.

Алгоритм \scsma та режим роботи \bem у мережах стандарту \iee був досліджений в ~\cite{simulation:study:slotted:ieee} та в ~\cite{gts:allocation:analysis}. Серед іншого, ці досліди встановлюють взаємозв'язок між superframe order (порядок чи розмір superframe) та максимальною пропускною спроможністю. Досліди стверджують, що пропускна спроможність сягає свого здійснимого максимуму, якщо superframe order дорівнює 3 або 4. Подальше збільшення superframe order не має значного впливу на пропускну спроможність.

Аналіз та порівняння алгоритмів \ucsma та \scsma в стандарті \iee було проведено в ~\cite{analysis:slotted:unslotted}. У висновках досліду зазначається, що алгоритм \ucsma  показує більшу максимальну пропускну спроможність у порівнянні із \scsma.

Але, цей висновок не є підставою для того, щоб вважати режим роботи \bem, який використовує алгоритм \scsma{}, повністю непотрібним. Цей режим пропонує період CFP, якій можуе бути використаний в мережевому протоколі, що є специфічним для прикладної програми.

\subsection{Огляд середовищ моделювання мереж}

Згідно до задач \ref{task:create_model}) та \ref{task:do_simulation}), що були поставлені до магістерської роботи і описані у вступі, необхідно провести моделювання мережі на основі технології \iee. Існує декілька серед моделювання для комп'ютерних мереж. Надалі розглянемо варіанти и оберемо одну для використання.

\paragraph{Середовище моделювання ns}
\label{par:ns}

ns~--- це середовище моделювання мереж із дискретним часом подій, що призначене для моделювання систем Інтернету із дослідницькою та навчальною ціллю. Середовище моделювання розповсюджується під свобідною ліцензією GNU GPLv2 і знаходиться у відкритому доступні для використання.

Актуальними на цей час є версії 2 та 3. 

Розробка версії 2 почалась у 1996 році, остання стабільна версія 2.35 була випущена у листопаді 2011 року. Розробниками була заявлена ціль випустити версію 2.36 наприкінці 2013 року \cite{nsnam:roadmap}. Нова версія призначена виправити деякі помилки, змінити скрипти для зборки, добавити декілька нових моделей. Але, взагалі розробка проекту вважається основними розробниками закінченою.

Розробка версії 3 почалась у 2008 році. Розробники повністю відкинули старий код і почали розробку з початку. Через те, не весь функціонал, що був підтриманий версією 2, присутній у версії 3. Версія зараз активно розроблюється. Остання версія 3.18 була опублікована у серпні 2013 року, наступна версія 3.19 запланована на грудень 2013 \cite{nsnam:current:development}.  

Середовище моделювання ns-3 має початкову підтримку мереж стандарту \iee. Серед найбільших недоліків є підтримка MAC рівнем лише \ucsma і, через те, лише режиму роботи \blm. Опис стану підтримки мереж стандарту \iee середовищем моделювання може бути знайдений в розробітницькій  документації в репозиторії сирцевого коду \cite{ns3:lrwpan}.

Середа моделювання ns-2 має кращу підтримку мереж стандарту \iee. Повністю підтримується режим роботи \blm. В режимі роботи \bem підтримується передача даних у періоді CAP. Стандартної версії бракує підтримки GTS. Але у 2011 році підтримка GTS була розроблена у рамках досліду \cite{ns2:with:cfp}.

\paragraph{Середовище моделювання Cooja}

Cooja~--- це середовище моделювання мереж із дискретним часом подій, що призначене для моделювання бездротових сенсорних мереж \cite{cooja:intro}. Розробка середовища моделювання проводиться у рамках проекту розробки операційної системи Contiki OS, що призначена для використання на вузлах сенсорних мереж. 

Середовище моделювання Cooja базується на моделюванні окремих вузлів мережі, що відтворюють справжні прилади із їх компонентами. Для цього, Cooja використовує інші середовища моделювання для підтримки деяких визначених платформ. Наприклад, для моделювання вузлів на базі мікроконтролерів AVR використовується середовище моделювання Avrora. Таким чином, при моделюванні Cooja дозволяє використовувати програмний код, що буде використаний на справжньому пристрої.

Підтримка моделювання технології \iee виконана на рівні моделювання роботи справжніх радіопередавачів із їх дійсними характеристиками.

Розробка Cooja ведеться разом із Contiki OS. Остання версія Contiki OS 2.7 була опублікована 15 листопада 2013 року \cite{contikios:27:released}. 

\paragraph{Вибір середовища моделювання мережі}

Два оглянуті середовища моделювання мережі мають дуже різні підходи до моделювання. Середовище ns використовує спрощені моделі, які відтворюють лише мережевий стек та особливості протоколу. Реальна система не відтворюється. З іншого боку, середовище Cooja використовує моделі, що як найбільш приближені до справжніх пристроїв. 

Оскільки в цій роботі розглядається деяка узагальнена система управління елементами медіафасаду, використовувати моделі, що відтворюють справжні пристрої, не доцільно. Такий рівень деталізації моделей завеликий для поставлених задач моделювання. Таким чином, для моделювання будемо використовувати середовище ns.

Середовища моделювання ns-2 та ns-3 мають різний рівень підтримки технології стандарту \iee. Більш нова, третя версія на цей час не спроможна забезпечити роботу моделі в усіх необхідних режимах. Таким чином, для моделювання будемо використовувати саме другу версію середовища моделювання ns.


\subsection{Висновки до першого розділу}

В цьому розділі були наведені відомості про системи медіафасадів, були розглянуті їх головні характеристики та особливості мереж систем управління.

Серед інших типів систем медіафасадів був окремо виділений тип ad-hoc медіафасадів. Системи цього типа характеризуються розподіленим виконанням задач візуалізації та взаємодії із користувачем. Розподілені вузли для функціонування у рамках цілої системи повинні бути об'єднані в єдину мережу. Для забезпечення мобільності вузлів в цілях покращеної взаємодії з користувачем, полегшеного розгортання системи, тощо, було запропоновано використати бездротові радіомережі, на відміну від звичайних дротових мереж, що використовуються у класичних медіафасадах.

Через свої особливості, системою ad-hoc медіафасаду висуваються наступні вимоги до каналу зв'язку:
\begin{itemize}
	\item радіус дії: метри~--- десятки метрів;
	\item підтримка десятків~--- сотень вузлів в мережі;
	\item енергоефективність;
	\item мобільність;
	\item легкість використання.
\end{itemize}

Для виконання перерахованих вище вимог були відібрані та оглянуті деякі технології бездротового радіозв'язку, а саме: Bluetooth, Wi-Fi, UWB, \iee. Було проведено зведене порівняння відібраних технологій. За підсумками порівняння пропонується використовувати технологію \iee для побудови радіомережі у системі управління ad-hoc медіафасаду. 

Було проаналізовано особливості стандарту технології \iee. Стандарт технології \iee пропонує багато різних рівнів PHY та єдиний рівень MAC. Від обраного рівню PHY залежить пропускна спроможність, дальність роботи та деякі інші характеристики мережі. Більшість пристроїв на базі технології \iee працюють в діапазоні 2,4 ГГц та підтримують максимальну пропускну спроможність 250 Кбіт/с. 

Найважливішими особливостями стандарту є два режими роботи мережі: \blm та \bem. Режим \blm простіший та дозволяє досягти найбільшої пропускної спроможності. Режим \bem забезпечує засоби для тонкого контролю доступу до мережі. Обидва режими повинні бути враховані при розробці протоколу управління елементами медіафасаду при різних умовах використання.

Згідно до поставлених до роботи завдань, запропоновані результати необхідно перевірити шляхом моделювання мережі. Було розглянуто декілька середовищ моделювання мереж. З них для використання було відібрано середовище ns-2, оскільки воно забезпечує відповідний рівень абстракції та надає необхідні засоби для моделювання мереж на базі технології \iee.


\section{Розробка мережевого протоколу для системи ad-hoc медіафасаду}
\label{sec:2:network:protocol:amf}


Цей розділ присвячений розробці мережевого протоколу для системи ad-hoc медіафасаду. Будуть проаналізовані архітектура та сценарії використання, запропоновані рішення щодо розроблюваного протоколу, а також буде розглянута окрема оптимізація протоколу.

\subsection{Аналіз особливостей архітектури системи ad-hoc медіафасаду}
\label{sub:system:arch}

Перед усім, розглянемо архітектуру системи ad-hoc медіафасаду (\figref{fig:sys_arch}). 

\begin{figure}[bth]
\centering
\adjustbox{max width=\textwidth}{
	\input{img/sys_arch}
}
\caption{\label{fig:sys_arch}Загальна архітектура системи ad-hoc медіафасаду}
\end{figure}

Система поділяється на дві основні частини: Сервер та Клієнти.

Клієнти візуалізації виконують, перед усім, фактичну роботу по візуалізації, а також дозволяють користувачам системи взаємодіяти із системою. Клієнти можуть мати необов'язкові сенсори, які можуть використовуватися системою для визначення положення Клієнтів та інших видів взаємодії із користувачами.

До складу Сервера входять Серверний контролер, Серверний додаток та сенсори. Сенсори на стороні Сервера використовуються для визначення положення Клієнтів. Серверний додаток проводить загальне керування візуалізацією, системою. Серверний контролер використовує інформацію від сенсорів для того, щоб розподілити керівні команди від Серверного додатка на окремі завдання для Клієнтів. Серверний контролер проводить оновлення візуалізації, посилаючи необхідні команди Клієнтам через канал зв'язку.

Блок Віддалений додаток представляє на схемі будь яку іншу систему, яка під'єднана до системи медіа-фасаду, але не приймає активної участі в процесі візуалізації. Це може, наприклад, бути деякий інтерфейс користувача для адміністрування системи, Web-додаток, сусідня система візуалізації, тощо.

\subsection{Зв'язок архітектури системи ad-hoc медіафасаду та мережевого протоколу взаємодії}

Згідно із запропонованою в підрозділі~\ref{sub:system:arch} архітектурою системи, Клієнти візуалізації не підтримують зв'язок один з одним заради цілей прикладної системи, візуалізації. Клієнти спілкуються лише із Серверним контролером, щоб отримати оновлення візуалізації, повідомити інформацію з сенсорів. Однак, спілкування між Клієнтами заради цілей управління мережею знаходиться поза рамками запропонованої архітектури і не забороняється.

\paragraph{Аналіз напрямків трафіку у мережі}
\label{par:traffic:cases}

Виходячи із наведеної в підрозділі~\ref{sub:system:arch} архітектури системи, можна виділити два напрямки мережевого трафіку в системі:
\begin{itemize}
	\item трафік від Сервера до Клієнтів;
	\item трафік від Клієнтів до Серверу.
\end{itemize}

Обидва напрямки не однорідні і складаються з команд та даних різного роду, розміру та вимог до QoS (Quality of Service~--- якість обслуговування). QoS~--- це гарантії від мережі до прикладної програми щодо якості характеристик каналу зв'язку: пропускна спроможність, час доставки.

Трафік від Сервера до Клієнтів складається, перед усім, з команд оновлення візуалізації. Ці команди змінюють візуальний стан Клієнтів. Залежно від типу, природи візуалізації, до цього виду трафіка можуть пред'являтися різні вимоги щодо часу і гарантій доставки. Але, можна очікувати, що команди візуалізації будуть складати основну частину всього мережевого трафіку.

Одним з найпростіших для виконання механізмів оновлення візуалізаціє є наступний: усі Клієнти оновлюються часто і одночасно, так само, як окремі пікселі на моніторі оновлюються одночасно при зміні кадру. При цьому механізмі, команди на оновлення відсилаються часто. В такому випадку, витрата однієї команди на оновлення буде менш помітна і менш впливова на загальний опит користувача. Більш важливою є доставка  команд оновлення у встановлені рамки ніж надійна доставка. Якщо команда запізнюється із доставкою~--- її все одно можна відкидати, бо вона застаріла і скоро прийде наступна. Цей підхід використовується в існуючих протоколах потокової передачі медіа-контенту. Звісно, якщо кількість відкинутих чи втрачених кадрів завелика, тоді якість сигналу падає аж до рівню повної непридатності. Таким чином, рівень допустимої кількості втрат залежить від конкретної прикладної задачі.

Крім команд оновлення візуалізації, трафік від Сервера до Клієнтів може також містити інші види керуючих команд. Наприклад, Сервер може використовувати модель Запит-Відповідь для отримання інформації з Клієнтів: інформація з сенсорів на Клієнтах, стан батареї, тощо. Можна очікувати, що цей тип трафіку має менші вимоги до QoS.

Основною складовою трафіку від Клієнтів до Серверу є відповіді Клієнтів на запити Сервера чи дані від сенсорів на Клієнтах. Цей вид трафіку буде сягати значної долі у загальному мережевому трафіку у випадку, якщо використовується модель Запит-Відповідь, чи якщо сенсори на Клієнтах створюсь багато інформації, яка часто відсилається до Сервера.

Обидва види трафіку також використовуються для підтримки мережі: створення мережі, асоціювання та де-асоціювання пристроїв, синхронізація, маршрутизація, тощо.

\paragraph{Вибір мережевої топології}

Вибір мережевої топології завжди залежить від поставленої прикладної задачі. Виходячи із описаних в пункті~\ref{par:traffic:cases} напрямків трафіку, найбільш простою для використання буде топологія "<зірка">. Згідно до архітектури системи (пункт~\ref{sub:system:arch}), Клієнти спілкуються лише із Сервером, який, в такому випадку, є PAN-координатором мережі. Сервер не зобов'язаний бути PAN-координатором мережі, але це спростить контроль мережі і дозволить використати деякі техніки у подальшому.

Використання інших мережевих топологій можливо, але підвищення складності може негативно позначитися на QoS характеристиках мережі.

\subsection{Сценарії роботи мережевого протоколу}
\label{sub:network:protocol:scenarios}

В пункті~\ref{par:traffic:cases} був наведений опис двох можливих напрямків трафіку. В цьому пункті ми розглянемо два різні сценарії можливих рівнів трафіку і запропонуємо варіації мережевого протоколу для них.

Як вже зазначалося вище, ми очікуємо витрачати основну частину пропускної спроможності мережі на передачу команд оновлення візуалізації, тобто на трафік від Сервера до Клієнтів. Припустимо, що це очікування вірне. Тоді, маємо два можливі сценарії рівня трафіку від Клієнтів к Серверу:
\begin{itemize}
	\item незначний трафік;
	\item значний трафік.
\end{itemize}


\paragraph{Аналіз роботи мережі при незначному рівні трафіку від Клієнтів к Серверу}
\label{par:low:ntht}

Цей сценарій має місце у випадку, коли Клієнти візуалізації не обладнані сенсорами чи сенсори оновлюють свої показники не часто. Керівні команди так саме невеликі і рідкісні. Це можливе у випадку, коли не використовується модель Запит-Відповідь та коли склад мережі змінюється не часто.

Для цього сценарію пропонується використати режим роботи мережі \blm. Кожен пристрій в мережі може почати передачу будь коли, всі пристрої конкурують за доступ до каналу зв'язку. 

Як було зазначене вище у пункті~\ref{par:throughput:evaluation}, режим роботи \blm дозволяє досягти найбільшої пропускної спроможності мережі. Пуск, настройка та керування мережею простіші за режим роботи \bem. Трафік від Сервера до Клієнтів займає основну частину усього трафіку, тому можна очікувати, що конкурентні конфлікти доступу до каналу зв'язку будуть рідкісні і не впливові.

З іншого боку, якщо попередня оцінка рівню трафіку від Клієнтів до Серверу не вірна і, насправді рівень навантаження набагато вище, тоді пропускна спроможність мережі буде зменшена через конкурентні конфлікти доступу. Таким чином, в приведеному сценарії є дуже важливою правильна попередня оцінка умов роботи системи.

Другий недолік запропонованого рішення полягає в процедурі асоціації приладів при підключенні до мережі. Асоціація при режимі роботи \blm наступна: пристрій, що хоче приєднатися до мережі, відсилає команди Beacon Request (запит beacon) на кожному з доступних каналів і очікує відповіді від PAN-контролера. PAN-контролер, отримавши  у свою чергу Beacon Request, вирішує, чи дозволити пристрою приєднатися до мережі і відповідає на запит. Як можна бачити, пристрої повинні активно розшукувати мережу, до якої можна приєднатися. Процедура активної асоціації пристроїв збільшує трафік від Клієнтів до Серверу і, через це, зменшує QoS в мережі. Якщо склад мережі змінюється часто, нові Клієнти будуть проводити активну асоціацію і негативно впливати на роботу мережі.

\paragraph{Аналіз роботи мережі при значному рівні трафіку від Клієнтів к Серверу}
\label{par:high:ntht}

Цей сценарій має місце у випадку, коли Клієнти візуалізації обладнані сенсорами, які часто  оновлюють свої показники, або коли склад мережі змінюється часто.

Для цього сценарію пропонується використати режим роботи мережі \bem, що забезпечує підтримку GTS.

Як було зазначене вище у пункті~\ref{par:beacon:enabled:mode}, режим роботи \bem дозволяє поділити superframe на два періоди: CAP та CFP. Доцільно відвести основну долю superframe під CFP у відповідності з відношенням долі критичного трафіку Сервера до Клієнтів до сумарної долі трафіку у мережі. Протягом періоду CFP Сервер відправлятиме команди оновлення візуалізації та іншу критичну інформацію. Залишок superframe відводиться під період CAP, протягом якого діють і Сервер, і Клієнти. CAP відводиться для некритичного трафіку в обидві сторони, доступ до каналу зв'язку проводиться на конкурентній основі. 

Виключне використання періоду CFP Сервером дозволяє ввести гарантії на QoS мережі, планувати пропускну спроможність та часи затримок. 

Процедура асоціації нових Клієнтів також дещо простіша. Оскільки в мережі постійно на початку кожного superframe відправляються кадри beacon із інформацією про мережу, новий Клієнт може не проводити активну асоціацію. Замість цього, він повинен пасивно прослуховувати кожен з доступних каналів, щоб отримати beacon на початку superframe. Отримавши beacon, новий Клієнт може почати спілкування із Сервером протягам періоду CAP. Така пасивна асоціація забезпечує непереривання передачі важливого трафіку.

Режим роботи \bem може бути додатково використаний для синхронізації часу між Сервером та Клієнтами. Така часова синхронізація може буде використана в деяких стратегіях оновлення візуалізації.

До недоліків запропонованого режиму належить, перш за усе, необхідність додаткового налаштування параметрів superframe і взагалі більш складна робота. Сервер повинен бути здатний оцінити необхідну для передачі критичних команд пропускну спроможність протягом наступного superframe для того, щоб передати настройки superframe на початку у кадрі beacon.

Інший недолік~--- менша загальна пропускна спроможність. Оскільки період CAP є обов'язковим і деяка частина superframe завжди відведена під CAP, Сервер не здатний використати для передачі критичних даних максимально можливу полосу пропускання. Якщо жоден Клієнт не веде передачу протягом CAP, цей період втрачено марно.

Як було показано в пункті \ref{par:throughput:evaluation}, при зменшенні розміру кадру, зменшується пропускна спроможність. Але можна очікувати, що трафік від Клієнтів до Сервера складатиметься саме із невеличких кадрів. Враховуючи велику кількість Клієнтів в мережі, а також те, що частина superframe відведена під CFP, ймовірність колізій під час CAP тільки збільшується, а пропускна спроможність падає. Тобто, система повинна бути готовою до затримок чи втрат доставки трафіку від Клієнтів до Серверу. Відношення між розмірами CFP та CAP в цьому випадку є найбільш впливовим параметром для регулювання якості та надійності доставки. Це рішення є компромісним.

\subsection{Оцінка розміру мережі}

У пункті \ref{par:traffic:cases} був розглянутий один з можливих механізмів оновлення візуалізації, при якому усі Клієнти оновлюються разом і часто. При цьому механізмі, команди оновлення візуалізації потрібно відправляти Клієнтам на кожному «візуальному кадрі», тобто об'єм даних, що необхідно передати, є стабільним. 

Розглянемо можливі варіанти виконання цього механізму та проведемо оцінку розміру мережі, що може бути розгорнута. Розмір мережі будемо оцінювати за кількістю Клієнтів, що можуть бути підтримані мережею при заданих характеристиках трафіку від Сервера до Клієнтів.

\paragraph{Управління із відправкою команд окремо до кожного Клієнта}
\label{par:individual:send}
Проведемо оцінку можливого розміру мережі у випадку, коли кожне оновлення візуалізації відправляється Сервером окремо до кожного Клієнта. Цей спосіб можна назвати «наївною» реалізацією.

Як було показано в пункті \ref{par:throughput:evaluation}, корисна пропускна спроможність мережі залежить від розміру корисного навантаження. В тому же пункті було наведене рівняння \ref{eq:throughput} функції $R(p)$ корисної пропускної спроможності, що може бути досягнута при передачі кадрів із розміром корисного навантаження $p$. 

Позначимо $T$~--- інтервал, з яким візуалізація повинна бути оновлена. Тоді, інтенсивність трафіку, що генерується оновленнями візуалізації, становить:
\begin{equation}\label{eq:traf:rate}
	r(p, T) = \frac{p}{T}  \text{ .}
\end{equation}

Тоді, виходячи із рівнянь \ref{eq:throughput} та \ref{eq:traf:rate}, запишемо рівняння можливого розміру мережі:
\begin{equation}\label{eq:net:size:individual:send}
	N(p, T) = \frac{R(p)}{r(p, T)} = \frac{\dfrac{8p}{ap+b}}{\dfrac{p}{T}} = \frac{8T}{ap + b} \text{ .}
\end{equation}

Аналізуючи рівняння \ref{eq:net:size:individual:send}, бачимо, що розмір мережі зменшується при зменшені інтервалу між посиланнями. Розмір мережі також зменшується при збільшенні розміру корисного навантаження кадру. Однак, навіть при використанні кадрів невеликого розміру, розмір мережі залишається дуже обмеженим. Наведемо числовий приклад.

Нехай, $T=1/60$ с, $p = 10$ байт. Використовуючи графік \ref{fig:throughput_graph}, положимо, що $R(10) = 30$ Кбіт/с. Тоді:

$N(10, 1/60) = \frac{30000 / 8}{\dfrac{10}{1/60}} = \frac{3750}{600} = 6,25$


При заданих параметрах, мережа здатна підтримувати оновлення 6 Клієнтів. В даному випадку, інтервал оновлення замалий для підтримки мережі Клієнтів більшої кількості.

Іншою проблемою цього режиму є відносна затримка оновлення між окремими Клієнтами. Час між оновленням першого та $n$-ного Клієнта дорівнює $n \cdot delay$, де $delay$~--- час на передачу одного кадру. При великому $T$ і великій кількості Клієнтів в мережі, часткова оновленість (тобто розсинхронізація) Клієнтів може стати досить помітною.

Цей варіант оновлення мережі доцільно використовувати у випадках, коли не потребується часте оновлення візуалізації на вузлах чи одним оновленням можна запрограмувати вузол на довгострокову дію. Також, цей варіант може бути доцільно використовувати, якщо візуалізація окремих Клієнтів проходить не за регулярними інтервалами часу.

\paragraph{Управління із мультиплексуванням команд до Клієнтів}

Команди оновлення візуалізації для окремих Клієнтів можна об'єднати разом і відправити одним мережевим кадром, тобто, команди можна мультиплексувати. Цей підхід дозволяє більш ефективно використати доступний простір під корисне навантаження і досягти більшої пропускної спроможності. Такі мультиплексовані команди повинні бути відправлені до Клієнтів за допомогою широкомовного кадру.

Мультиплексування може бути використане для обох сценаріїв, які були описані в пункті \ref{sub:network:protocol:scenarios}.

Максимальний розмір кадру згідно до стандарту \iee становить 127 байт ~\cite{ieee:802:15:4:2011}. Деяку долю кадру займає MAC заголовок і контрольні поля. Як вже згадувалося в пункті \ref{par:throughput:evaluation}, заголовок має змінний розмір, який залежить від використаного режиму адресування та параметрів безпеки. У випадку, якщо ні поля безпеки, ні поля адресування не зазначені у заголовку, тоді розмір корисного навантаження кадру сягає свого максимуму в 122 байти. Але, корисність протоколів, що зовсім не застосують адресування, обмежена, тому розмір корисного навантаження в 114-120 байтів є більш реалістичним. Невикористання повністю доступного простору для корисного навантаження призводить до погіршення пропускної спроможності.

При використанні мультиплексування, рівняння для оцінки можливого розміру мережі становить:
\begin{equation}\label{eq:net:size:multiplex:send}
	N(p, T) = \frac{R(p_{max})}{r(p_{max}, T)} \cdot \frac{p_{max}}{p} \text{ ,}
\end{equation}

де $p_{max}$~--- максимальний розмір корисного навантаження кадру при обраному режимі адресування та параметрів безпеки.

Рівняння \ref{eq:net:size:multiplex:send} є подібним до рівняння \ref{eq:net:size:individual:send}, але в ньому добавлений множник $\frac{p_{max}}{p}$, який виражає долю навантаження оновлення одного вузла в мультиплексованому пакеті. Чим більше відношення $\frac{p_{max}}{p}$, тим більшу кількість Клієнтів здатна підтримувати мережа.

Розрахуємо чисельний приклад із пункту \ref{par:individual:send}, але для мультиплексованого відправлення при $p_{max} = 120$ байт. Будемо вважати, що $R(p_{max}) = 150$ Кбіт/с:

$N(10, 1/60) = \frac{150000 / 8}{\dfrac{120}{1/60}} \cdot \frac{120}{10} = 
		\frac{18750}{7200} \cdot 12 = 2,6 \cdot 12 = 31,25$


При заданих параметрах та використанні мультиплексованого управління, мережа здатна підтримувати 31 вузол, що в $\frac{31,25}{6,25} = 5$ разів більше, ніж мережа, що використовує індивідуальні оновлення. 

Проблема розсинхронізації Клієнтів, що була вказана у попередньому пункті, є менш впливовою при використанні мультиплексованого оновлення, оскільки декілька Клієнтів можуть бути оновлені одночасно.

Недоліком мультиплексування є ускладнення протоколу. Потребується деяка схема кодування інформації про те, оновлення яких Клієнтів знаходиться в кадрі. Можна запропонувати декілька рішень:

\begin{itemize}
	\item у кадрі додатково перераховуються всі номери (адреси) Клієнтів, оновлення яких знаходяться в кадрі;
	\item Клієнтам окремо призначаються групи (мультикаст-адреси). Кожній групі окремо призначається схема розташування її даних в пакеті. Кадр додатково має лише номер групи. Інформацію про групи можна передавати у кадрах beacon чи іншими службовими кадрами.
\end{itemize}

Цей варіант оновлення мережі доцільно використовувати у випадках, коли розмір оновлення дозволяє мультиплексування. У випадку, якщо оновлення проходить не за регулярними інтервалам часу, використання цього варіанту може бути не доцільним.

\subsection{Розширені топології мережі управління елементами ad-hoc медіафасаду}

Шляхом зміни топології мережі можна досягти збільшення максимальної кількості Клієнтів в мережі без зміни використовуємої мережевої технології. На \cref{fig:expansion:topologies} наведено схеми розширених топологій мереж. Далі розглянемо ці топології більш детально.

\todo{ref fig:expansion:topologies}

\begin{figure}[htb]

	\centering
	\subfloat[\label{fig:topo_stars}]{%[b]{0.3\textwidth}
		\adjustbox{max width=0.3\textwidth}{
			\includegraphics[width=\textwidth]{img/topo_stars.pdf}
		}
	}
	\qquad
	\subfloat[\label{fig:topo_cluster}]{
		\adjustbox{max width=0.3\textwidth}{
			\includegraphics[width=\textwidth]{img/topo_cluster.pdf}
		}
	}
	\caption*{Координатори~--- білі, кінцеві вузли~--- заштриховані}
	\caption{\label{fig:expansion:topologies}Схеми розширених топологій мереж управління:\\
		\protect\subref*{fig:topo_stars}~--- об'єднання зірок; \protect\subref*{fig:topo_cluster}~--- дерево кластерів
	}
\end{figure}

\paragraph{Топологія "<об'єднання зірок">}

Топологія "<об'єднання зірок"> (див. \cref{fig:topo_stars}), порівняно із топологією "<зірка">, не потребує жодних змін на рівні \iee. Сервер розгортає декілька окремих мереж із топологіями "<зірка">. Мережі діють на окремих фізичних каналах і не заважають одна одній. Єдиною логічною точкою перекреслення мереж є сам Сервер. На Сервері потрібно встановити декілька радіопередавачів, для того, щоб надати можливість Серверові діяти одночасно в декількох мережах.

Переваги топології "<об'єднання зірок">:
\begin{itemize}
	\item простота масштабування~--- для розширення існуючої мережі необхідно лише встановити додаткове обладнання на Сервері. Кожна мережа діє окремо так, як було описано в підрозділі \ref{sub:network:protocol:scenarios};
	\item маршрутизація на Сервері~--- тільки Сервер вирішує, як доставляти повідомлення до визначеного вузла. Не потребуються складні алгоритми маршрутизації.
\end{itemize}

Недоліки топології "<об'єднання зірок">:
\begin{itemize}
	\item обмежена кількість каналів~--- стандарт \iee визначає лише 16 каналів в діапазоні радіохвиль 2,4 ГГц. Ця кількість обмежує максимальний масштаб мережі;
	\item мала площа дії~--- якщо припустити, що усі радіоприймачі Сервера встановлені один біля одного і не приєднуються до Сервера довгими лініями зв'язку, тоді площа дії мережі не збільшується при збільшені масштабу мережі;
	\item збільшення пристроїв на Сервері~--- необхідно встановити додаткові радіопередавачі.
\end{itemize}

\paragraph{Топологія "<дерево кластерів">}

В мережі із топологією "<дерево кластерів"> (див. \cref{fig:topo_cluster}) діють декілька координаторів мережі, замість одного. Ці координатори організують власні кластери-підмережі. Окремі кластери об'єднуються в загальну мережу. Мережа починає своє зростання від PAN-координатора, який також є Сервером. Додаткові координатори конфігуруються статично чи обираються під час роботи мережі за потребою~--- можливі різні стратегії поведінки. Вся мережа діє на одному і тому ж самому каналі (чи в мережі є спеціальні прилади-повторювачі, що можуть діяти на декількох каналах і дозволяють перенести дію підмережі на інший канал).

Переваги топології "<дерево кластерів">:
\begin{itemize}
	\item збільшена площа дії~--- вузли, що не можуть бути досягнені Сервером, можуть входити в одну із підмереж;
	\item використовується один канал~--- масштабування мережі не обмежено кількістю фізичних каналів. Доступний вибір каналу, якщо поточний канал зайнятий чи має багато шуму.
\end{itemize}

Недоліки топології "<дерево кластерів">:
\begin{itemize}
	\item складна маршрутизація на вузлах~--- трафік повинен бути маршрутизований від Сервера до Клієнтів через інші координатори. Не існує єдиного найкращого алгоритму маршрутизації. Всі алгоритми маршрутизації мають накладні розходи на обслуговування;
	\item знижена пропускна спроможність і збільшена затримка~--- кожен "<стрибок"> через координатора кластера вносить додаткову затримку на прийом та перевідправлення. 
	\item проблема прихованого вузлу~--- всі бездротові мережі із униканням колізій схильні до цієї проблемі. Якщо в мережі існують вузли $A,B,C$ такі, що $A$ і $C$ не чують один іншого, але об'єднуються через вузол $B$, тоді можлива ситуація, коли $A$ і $C$ починають передачу одночасно і вузол $B$ не здатний прийняти ні одного сигналу. \iee не надає жодного захисту від цієї проблеми. Зазвичай, проблема вирішується за допомогою внесення випадковості до часу відправлення, а також за допомогою механізму підтверджень. Але пропускна спроможність мережі зменшується.
	\item складність використання режиму роботи \bem~--- стандарт \iee описує спосіб, яким можна використати режим роботи \bem в мережі із багатьма координаторами. Головний superframe, що встановлений PAN-координатором, повинен мати період неактивності, протягом якого інші координатори встановлюють свої superframe. В такому випадку, одна частина мережі повинна чекати іншу частину.
\end{itemize}

\subsection{Висновки до другого розділу}

В цьому розділі було проаналізовано архітектуру системи управління ad-hoc медіафасаду та напрямки мережевого трафіку в системі. Виходячи з того, що архітектура системи передбачає тільки спілкування Сервера із Клієнтами, для організації мережі управління елементами медіафасаду обрано мережеву топологію "<зірка">.

Далі були розглянуті варіанти навантаження мережі. Оскільки високий рівень навантаження у напрямку від Сервера до Клієнтів зумовлений особливостями системи управління елементами медіафасаду і є передумовою при розробці протоколу, були розглянуті випадки рівню навантаження у напрямку від Клієнтів до Сервера. Було розглянуто два випадки рівню навантаження: незначний та значний.

У випадку незначного рівню навантаження трафіку від Клієнтів до Сервера запропоновано використовувати режим роботи мережі \blm. Використання цього режиму роботу дозволяє підтримувати простоту реалізації та досягти максимально високої пропускної спроможності. Але також було зауважено, що, при збільшенні рівня навантаження, очікуване погіршення якості обслуговування трафіка від Сервера до Клієнтів. 

У випадку значного рівня навантаження трафіку від Клієнтів до Сервера запропоновано використовувати режим роботи мережі \bem. Для підтримки заданого рівню якості обслуговування трафіку від Сервера до Клієнтів запропоновано вести передачу трафіку від Сервера до Клієнтів протягом періоду CFP, залишаючи період CAP для трафіку від Клієнтів до Сервера.

Далі в розділі була проведена оцінка можливого розміру мережі за критерієм кількості Клієнтів при заданих характеристиках трафіку від Сервера до Клієнтів. Було розглянуто механізми передачі команд управління від Сервера до Клієнтів: відправка окремих команд до кожного Клієнта та відправка мультиплексованих команд одночасно до декількох Клієнтів. Було показано, що використання мультиплексованих команд може забезпечити значний зріст розміру мережі у випадку, коли можливо помістити декілька команд в одному кадр. Мультиплексування команд потребує ускладнення протоколу і передачі додаткової керуючої інформації про схему мультиплексування.

Наприкінці були запропоновані розширені топології мережі для використання у випадках, коли базової топології "<зірка"> недостатньо підтримки великої кількості Клієнтів, а саме топології "<об'єднання зірок"> та "<дерево кластерів">. Були зазначені переваги та недоліки обох топологій.

% 3 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\section{Розробка програмної моделі мережі управління елементами індикації медіафасаду}
\label{sec:3:model:development}

Згідно до задач \ref{task:create_model}) та \ref{task:do_simulation}), що були поставлені до магістерської роботи і описані у вступі, необхідно провести моделювання мережі управління елементами індикації медіафасаду. В розділі \ref{sec:1} для розробки програмної моделі було обрано середовище моделювання ns-2. В цьому розділі буде розглянута розробка програмної моделі мережі із використанням обраного мережевого середовища.

\subsection{Загальна модель бездротової мережі у середовищі моделювання ns-2}
\label{sub:ns:general:network:model}

Основним елементом моделі бездротової мережі у середовищі моделювання ns-2 є об'єкт класу MobileNode. Окремі об'єкти MobileNode об'єднані за допомогою каналу передачі у єдину мережу (\cref{fig:mobile_node:network}). 


\begin{figure}[bth]
	\centering
	% \includegraphics[width=0.7\textwidth]{img/mobile_node.pdf}
	\missingfigure{fig mobile node network}
	\caption{\label{fig:mobile_node:network}Схема мережі із декількох MobileNode}
\end{figure}

Клас MobileNode походить від класу Node. Але, на відміну від звичайних Node у ns-2, об'єкти класу MobileNode не зв'язані один з іншим через об'єкти класу Link. Замість цього, ns-2 моделює передачу та прийом сигналів через радіоканал, використовуючи єдиний об'єкт для каналу.

Клас MobileNode~--- розділений клас. Він агрегує у собі окремі компоненти. Така модульна структура дозволяє використовувати загальну схему MobileNode для моделювання різних технологій та алгоритмів. 

Загальна схема MobileNode зображена на \cref{fig:mobile_node}.

\begin{figure}[bth]
	\centering
	\includegraphics[width=0.7\textwidth]{img/mobile_node.pdf}
	\missingfigure{поправить, стрелка от demux к агент маршрутизации, несколько агентов}
	\caption{\label{fig:mobile_node}Загальна схема MobileNode}
\end{figure}

На \cref{fig:mobile_node:osi:comparison} наведена схема співвідношення мережевого стеку MobileNode до рівнів мережевої моделі OSI.

\begin{figure}[bth]
	\centering
	% \includegraphics[width=0.7\textwidth]{img/mobile_node.pdf}
	\missingfigure{fig mobile node osi comparison}
	\caption{\label{fig:mobile_node:osi:comparison}Схема співвідношення мережевого стеку MobileNode до моделі OSI}
\end{figure}


Далі наведений опис компонентів, що входять до составу MobileNode, та їх задач:

\begin{itemize}
	\item компоненти Джерело трафіку та Агент моделюють верхні рівні додатку. Генератори трафіку здібні створювати навантаження на мережу за визначеним законом. Агенти використовуються для моделювання складних схем спілкування;

	\item компонент Demux розподіляє прийняті пакети між під'єднаними до MobileNode агентами;

	\item компонент Агент маршрутизації використовується для маршрутизації пакетів в мережі. При моделюванні mesh-мережі, кожен вузол мережі може брати участь в маршрутизації трафіку. Агент маршрутизації приймає рішення щодо кожного прийнятого пакета, чи треба його переслати далі;

	\item компонент LL (рівень зв'язку) відповідає за симуляцію протоколів канального рівню. Основною задачею LL є правильна установка MAC-адресу призначення у MAC-заголовку пакету. Для цього, LL під’єднаний до компоненту ARP, який вирішує, який MAC-адрес відповідає зазначеному адресу вищого рівня (наприклад, IP-адрес). Зазвичай, LL отримує всі вихідні (ті, що відправляються до каналу зв'язку) пакети від агента маршрутизації. Такі пакети LL відправляє до черги інтерфейсу. Всі вхідні пакети (ті, що отримані із каналу зв'язку) LL отримує від компоненту MAC;

	\item компонент ARP (Address Resolution Protocol, протокол визначення адрес) отримує запроси від LL. Якщо MAC-адрес вузла призначення відомий ARP, тоді цей адрес записується до MAC-заголовку пакета. Інакше, ARP за допомогою широкомовного пакету запрошує розшукуваний MAC-адрес у інших вузлів мережі і тимчасово приховує пакет, що відправляється, у кеші. Для кожного невідомого MAC-адресу, ARP тримає у кеші лише один пакет. Якщо поступає два пакети, старіший з них відкидається. Як тільки MAC-адрес вузла призначення стає відомим, пакет, що був прихований в кеші, повертається до LL і той передає пакет до черги інтерфейсу;

	\item компонент Черга інтерфейсу~--- це черга, що надає пріоритет пакетам які відправлені протоколами роутінгу, вставляючи їх до початку черги перед звичайними пакетами;

	\item компонент MAC забезпечує коректне спільне використання загального середовища каналу декількома вузлами мережі; 

	\item компонент Мережевий інтерфейс виконує роль фізичного інтерфейсу, який використовується мобільним вузлом для доступу до каналу зв'язку. Мережевий інтерфейс для бездротового радіозв'язку виконано як клас Phy/WirelessPhy та його дочірні класи. Цей інтерфейс моделює передачу даних із підтримкою вказаної моделі розповсюдження сигналів. Також, підтримується обробка колізій передачі. При передачі мережевий інтерфейс додає до кадру свої метадані (потужність випромінювання, частота радіохвиль, тощо). Метадані використовуються моделлю розповсюдження сигналів на приймаючій стороні для визначення, чи достатня потужність сигналу для детектування та прийому пакету;

	\item компонент Модель розповсюдження сигналів використовує комбіновану математичну модель: на коротких відстанях використовується формула Фрііса (потужність прийнятого сигналу пропорційна $\frac{1}{R^2}$, де $R$~--- відстань між антенами), а на великих відстанях використовується апроксимована двопроменева модель розповсюдження сигналу (потужність прийнятого сигналу пропорційна $\frac{1}{R^4}$). Апроксимація припускає відображення сигналу від плоскої поверхні;

	\item у якості антени використовується об'єкт класу Antenna/OmniAntenna, що моделює всенаправлену антену із одиничним коефіцієнтом підсилення. 
\end{itemize}

Описана в цьому підрозділі загальна модель бездротової мережі є лише скелет і повинна бути сконфігурована для конкретної моделі мережі.

\subsection{Модель бездротової мережі управління елементами медіафасаду на базі технології \iee у середовищі моделювання ns-2}
\label{sub:ns:ieee:network:model}

В таблиці \ref{tbl:simulation_classes} наведені класи компонентів що були використані для моделювання бездротової мережі \iee.

\begin{table}[htbp]
\caption{Класи компонентів, що були використані для моделювання мережі}
\centering
\begin{tabu} to \textwidth { |X|X| }
\hline
\col{|c|}{Компонент}          & \col{c|}{Клас}             \\ \hline
Канал зв'язку                 & Channel/WirelessChannel    \\ \hline
Антена                        & Antenna/OmniAntenna        \\ \hline
Мережевий інтерфейс           & Phy/WirelessPhy/802\_15\_4 \\ \hline
Модель розповсюдження сигналу & Propagation/TwoRayGround   \\ \hline
Рівень MAC                    & Mac/802\_15\_4             \\ \hline
Очередь інтерфейсу            & Queue/DropTail/PriQueue    \\ \hline
Рівень LL                     & LL/LL802\_15\_4            \\ \hline
Агент маршрутизації           & NOAH                       \\ \hline
\end{tabu}
\label{tbl:simulation_classes}
\end{table}

Середовище моделювання ns-2, у стандартній комплектації, не підтримує у необхідному обсязі всі можливості технології \iee, що необхідні для моделювання розробленого в розділі \ref{sec:2:network:protocol:amf} протоколу. Через те, до симулятору було внесено ряд змін, які описані у наступних пунктах.

\paragraph{Додаткові компоненти, що були використані при розробці програмної моделі мережі}

До середовища моделювання було додано деякі необхідні компоненти:

\begin{enumerate}
	\item добавлена імплементація передачі даних протягом періоду CFP у інтервалах GTS. Використана реалізація була розроблена у рамках досліду \cite{ns2:with:cfp} і може бути отримана за посиланням \cite{ns2:with:cfp:sources}. Без цієї реалізації, середовище моделювання було здатне вести передачу тільки протягом періоду CAP;

	\item добавлено агент маршрутизації NOAH \cite{ns2:noah}. ns-2 надає декілька реалізацій алгоритмів для ad-hoc маршрутизації (AODV, DSR, DSDV, тощо). Всі поставлені із середовищем моделювання агенти маршрутизації призначені для роботи в ad-hoc мережах. Вони будують схему мережі протягом своєї роботи. На відміну від усіх них, NOAH (No Ad-Hoc routing agent) використовує заздалегідь визначену статичну таблицю маршрутизації. Під час роботи агент не робить спроб оновити таблицю маршрутизації і не відправляє жодних службових пакетів. Використання NOAH дозволяє моделювати статичні мережі із заздалегідь відомою топологією;

	\item добавлено агент для генерації широкомовного трафіку. Реалізацію агента отримано за посиланням \cite{ns2:broadcastapp}. Ця реалізація дозволяє генерувати CBR (constant bit-rate) широкомовний трафік на відміну від зазвичай використовуємих агенту UDP та генератору CBR-трафіку.

\end{enumerate}

\paragraph{Зміни до програмного коду компонентів середи моделювання ns-2}

Оскільки використані компоненти не підтримували деякі можливості чи мали помилки у своїх алгоритмах, було вирішено внести виправлення до їх програмного коду. Далі наведений опис змін, що були внесені. 

\begin{enumerate}

	\item програмний код агента маршрутизації NOAH змінено так, щоб розмір пакету, що відправляється, не змінювався при проходженні пакету через агента. Попередня помилкова поведінка: агент NOAH додавав до розміру пакету розмір IP-заголовку. Поведінка визнана помилковою, оскільки розроблена модель мережі не використовує протокол IP для адресації вузлів мережі; 

	\item зроблено наступні виправлення в програмному коді агента для генерації широкомовного трафіку:
	\begin{enumerate}
		\item виправлена помилкова реєстрація метаінформації агенту в середовищі моделювання. Помилка, вірогідно, викликана тим, що агент був розроблений для попередньої версії середовища моделювання;
		
		\item виправлений розмір широкомовних пакетів, що створювалися генератором. Через помилковий код, розмір пакету не міг бути меншим за 100 байт, оскільки агент використовував пакет для того, щоб передавати деяку метаінформацію. Але для передачі метаінформації разом із пакетом середовище моделювання передбачає додатковий простір, який не враховується при розрахунку розміру пакета. Виправлена версія програмного коду агента правильно використовує цей додатковий простір;
		
		\item добавлене настроювання об'єктів агенту, яке дозволяє відключити перепосилання пакетів із програмного коду сценарію моделювання;
	\end{enumerate}

	\item до реалізації мережевого стеку \iee добавлено підклас LL/LL802\_15\_4, якій, на відміну від базового класу LL, не використовує таблицю ARP. Замість цього, він використовує адресу із заголовку пакета у якості MAC-адреси. Також він дозволяє встановити флаг GTS для всіх вихідних пакетів. Клас Mac/802\_15\_4 використовує цей флаг для того, щоб обрати, чи відправляти пакет протягом періоду CFP; 

	\item до реалізації мережевого стеку 802.15.4 добавлена можливість вказати параметри GTS командою до PAN-координатора із програмного коду сценарію моделювання. До цього виправлення, реалізація підтримувала тільки алокацію інтервалів GTS по запиту GTS Request від кінцевого вузла мережі. Але, стандартом \iee не забороняються PAN-координатору виділяти інтервали GTS самому собі;


	\item клас Mac/802\_15\_4 було змінено так, що PAN-координатор не скидає параметри виділених періодів GTS у наступному superframe. Стандартом технології \iee передбачений механізм деалокації інтервалів GTS у випадку, якщо вони не використовуються певний час. Існуюча реалізація мережевого стеку \iee в середовищі моделювання просто деалоціювала всі GTS наприкінці superframe. Виправлена реалізація деалоцює інтервали GTS тільки по запиту з програмного коду сценарію моделювання;

	\item виправлено деякі помилки в реалізації GTS, а саме:
	\begin{enumerate}
		\item добавлена можливість виділити період GTS тривалістю більше одного слоту. Активна частина superframe поділяється на 16 рівних інтервалів~--- слотів (див. \cref{fig:superframe}). Попередня реалізація завжди виділяла GTS тривалістю 1 слот незалежно від переданих настройок;

		\item виправлена помилка у розрахунку можливості виділення нового періоду GTS. Згідно до стандарту технології \iee, кожен supeframe обов'язково повинен містити період CAP. Мінімальна тривалість розраховується із використанням константи $aMinCAPLenght$. При різних значеннях beacon order, CAP повинний бути тривалістю якнайменш 1-4 слотів. Але, помилкова реалізація не використовувала у розрахунку $aMinCAPLenght$ і вважала, що тривалість CAP завжди повинна бути якнайменш 7 слотів. Виправлена реалізація правильно враховує константу $aMinCAPLenght$, що дозволяє відводити під період CFP більшу частину superframe;

		\item виправлений ряд помилок, що виключали можливість відправки пакетів PAN-координатором під час GTS. Реалізація класу Mac/802\_15\_4 розрізнює декілька місць для зберігання настройок CFP в залежності від того, звідки вони походять: отримані з верхнього рівню (на PAN-координаторі) чи отримані з кадру beacon (на кінцевому вузлі). Метод, що проводив підготовку пакету для відправки протягом GTS, використовував тільки настройки, отримані з кадру beacon. Оскільки PAN-координатор сам відправляє кадри beacon, його другий набір настройок був порожнім і пакет не міг бути відправлений протягом GTS. Виправлена реалізація перевіряє, чи є поточний об'єкт класу Mac/802\_15\_4 PAN-координатором і використовує вірний набор настройок;

		\item виправлена помилка у розрахунку тривалості передачі GTS, що призводила до помилкових відкидань пакетів приймаючою стороною. Усі передані кадри повинні розділятися міжкадровим інтервалом часу (interframe spacing), протягом якого приймаючий вузол оброблює пакет (дешифрує заголовки кадру, відправляє підтвердження-ACK, доповідає на вищій рівень про прийом пакету, тощо). Помилкова реалізація не враховувала ці інтервали при плануванні відправки та могла помилково почати передачу кадру наприкінці GTS, коли часу на передачу вже було не достатньо. Виправлена реалізація правильно враховує періоди interframe spacing під час планування відправки кадрів;

		\item виправлена помилка у розрахунку розміру заголовка пакету, що був залишений для очікування наступного періоду GTS. Якщо кадр не можливо передати протягом поточного інтервалу GTS через нестачу часу на передачу, він може бути залишений до наступного інтервалу (у поточному чи наступному superframe). Залишений кадр перед наступною спробою проходить у другий раз настройку MAC-заголовку, що призводило до помилкового додавання розміру MAC-заголовку до розміру кадру у другий раз. Виправлення відіймає розмір MAC-заголовку від розміру кадру перед тим, як залишити його для очікування наступної спроби. Цей спосіб виправити помилку був найпростішим і потребуючим найменше втручання в програмний код.
	\end{enumerate}

\end{enumerate}

\subsection{Розробка програмного коду сценарію моделювання мережі управління елементами індикації медіафасаду}

Компоненти середовища моделювання, що були описані в попередніх підрозділах \ref{sub:ns:general:network:model} та \ref{sub:ns:ieee:network:model}, реалізовані на мові програмування C++. Хоч для програмування моделей мереж цілком можливо також використати C++, але, оскільки ця мова програмування через свої особливості заважає швидкій зміни параметрів моделі, в середовищі моделювання ns-2 зазвичай використовуються скрипти на мові Tcl для опису моделей та сценаріїв їх використання. Усі класи, що об'явлені в коді на C++, можуть бути викликані із програмного коду на Tcl. Модель мережі управління елементами медіафасаду також була описана у програмному коді сценарію моделювання на мові Tcl.

Для опису сценарію моделювання потрібно виконати наступні кроки:
\begin{itemize}
	\item задати параметри моделі у програмному коді чи із зовні як параметри командної строки;
	\item створити об'єкти середовища моделювання, топографії місцевості, відкрити файли, до яких буде зберігатися результати  моделювання;
	\item задати початкові параметри об'єктів класу MobileNode шляхом виклику метода node-config об'єкта середовища моделювання;
	\item створити об'єкти MobileNode для кожного окремого вузлу мережі;
	\item задати індивідуальні параметри об'єктів MobileNode;
	\item створити генератори трафіку та агенти і приєднати їх до об'єктів MobileNode;
	\item у випадку, якщо використовується протоколи, що потребують асоціації вузлів до координатора мережі (наприклад, при використанні режиму роботи мережі \bem), запланувати час виконання асоціації вузлів;
	\item запланувати час проведення етапів моделювання, запуску та зупинки генераторів трафіку, тощо;
	\item запустити моделювання.
\end{itemize}

Програмний код сценарію моделювання наведено у додатку \ref{sec:app_a:script}. Усі експерименти із моделлю мережі управління елементами візуалізації медіафасаду проводилися на базі цього сценарію. У різних проведених експериментах змінювалися параметри моделі.

Для моделювання трафіку від Сервера до Клієнтів був використаний агент для генерації широкомовного трафіку. Цей генератор створює постійний рівень навантаження, відсилаючи широкомовні пакети однакового розміру через однакові періоди часу.

Трафік від Клієнтів до Сервера моделюється як пуасоновський процес. Пуасоновський процес було обрано, оскільки він є найпростішою моделлю трафіку в мережі. Для створення пакетів трафіку усіма клієнтськими вузлами використовується клас Application/Traffic/Exponential. Цей клас дозволяє генерувати трафік із пакетів постійного розміру. Час відправки пакетів контролюється використовуючи стохастичний автомат, який може перебувати у стані idle та burst. Пакети трафіку створюються у стані burst. Час перебування у кожному із станів описується експоненціальним законом. Генератор конфігурується за допомогою наступних параметрів: 
\begin{enumerate}
	\item $burst\_time$~--- середній час в стані burst;
	\item $idle\_time$~--- середній час в стані idle;
	\item $size$~--- розмір пакету;
	\item $rate$~--- швидкість передачі.
\end{enumerate}

Згідно до документації до середовища моделювання ns-2, генератор Application/Traffic/Exponential може бути сконфігурований для моделювання пуасоновського процесу відправки пакетів. Для цього деякі параметри генератору необхідно встановити наступним чином:
\begin{enumerate}
	\item $burst\_time = 0$~--- мінімально можливий час у стані burst. Фактично, генератор буде створювати один пакет і переходити до стану idle;
	\item $idle\_time = interval\cdot1000 - \frac{size \cdot 8}{rate}$, де $interval$~--- середній інтервал між подіями створювання пакетів;
	\item $rate = 250$~--- максимальна пропускна спроможність мережі.
\end{enumerate}

\subsection{Процедура аналізу результатів моделювання}

Результатом роботи середовища моделювання є trace-файл, що містить у собі записи про кожну подію, що відбувалася у мережі. Події, що виникали в програмній моделі розробленої мережі управління елементами медіафасаду, поділялися до наступних класів:
\begin{itemize}
	\item пакет надійшов до мережевого стеку вузла з вищого рівню;
	\item кадр було відправлено вузлом;
	\item кадр було прийнято вузлом;
	\item пакет було передано з мережевого стеку вузла до вищого рівню;
	\item пакет було втрачено.
\end{itemize}

Для оцінки роботи мережі необхідно провести агрегацію результатів роботи середовища моделювання і підрахувати числові характеристики. Для цього було розроблено декілька окремих програм на мові Python. Ці програми виконували наступні кроки:
\begin{enumerate}
	\item програма-виконувач:
	\begin{enumerate}
		\item формує список комбінацій параметрів моделі, із якими необхідно провести моделювання;
		\item викликає середовище моделювання та передає параметрами моделі як параметри командної строки;
		\item проводить попередню обробку trace-файлу із результатами моделювання, переводячи його із текстового формату у внутрішній формат, який є придатним для подальшої обробки;
	\end{enumerate}

	\item програма-агрегатор використовує оброблені на попередньому кроці результати моделювання для розрахунку наступних параметрів окремих запусків середовища моделювання:
	\begin{enumerate}
		\item пропускна спроможність у заданому напрямку, виміряна на заданому вузлі мережі. Ця характеристика показує інтенсивність трафіку у обраному напрямку;
		\item час між подіями відправки та прийому кадру. Ці характеристику дозволяють оцінити середню затримку передачі;
		\item кількість успішно доставлених чи втрачених пакетів у заданому напрямку трафіка. Ця характеристика дозволяє оцінити рівень навантаження мережі та якость обслуговування трафіка;
	\end{enumerate}

	\item програма для побудування графіків використовує підраховані попередньою програмою характеристики окремих запусків середовища моделювання для створення наявного відображення результатів роботи моделі при різних параметрах. Програма для побудування графіків використовується для побудування графіків наступних типів:
	\begin{enumerate}
		\item графік залежності корисної пропускної спроможності обраного вузла від розміру корисного навантаження кадру;
		\item графік залежності затримки передачі від розміру корисного навантаження кадру;
		\item графiк залежностi швидкостi прийому на обраному вузлі вiд середнього iнтервалу вiдправки пакетiв вузлами;
		\item графiк залежностi долi успiшно прийнятих обраним вузлом пакетiв вiд середнього iнтервалу вiдправки пакетiв вузлам.
	\end{enumerate}
\end{enumerate}

Створені програми було використовано для проведення моделювання роботи мережі управління елементами індикації медіафасаду та аналізу характеристик її роботи. 

\subsection{Висновки до третього розділу}

У цьому розділі було розроблено програмну модель мережі управління елементами індикації медіафасаду. Розробка програмної моделі проводилась за допомогою середовища моделювання ns-2, яке було обрано в розділі \ref{sec:1}.

Під час розробки програмної моделі біло виявлено, що середовище моделювання має деякі недоліки, недоробки та помилки. Виявлені проблеми було виправлено. Серед інших виправлень, найбільш важливішими є виправлення в коді моделі мережевого стеку технології \iee. Ці виправлення дозволили побудувати програмну модель мережі, що працює в необхідних режимах роботи. 

Розроблена програмна модель мережі дозволяє перевірити поведінку мережі при використанні протоколу та механізмів, що були запропоновані в розділі \ref{sec:2:network:protocol:amf}, та при різних рівнях навантаження трафіку як у напрямку від Сервера до Клієнтів, так і у напрямку від Клієнтів до Сервера.

Для оцінки поведінки мережі при різних параметрах моделі біло розроблено допоміжні програми, які проводять автоматичний запуск середовища моделювання із заданими комбінаціямі параметрів, збирають результи моделювання та пдіраховують необхідні характеристики.

\section{Експерементальна перевірка характеристик протоколу для мережі управління елементами медіафасаду за допомогою програмної моделі}
\label{sec:4:modelling}

У цьому розділі наведено результати використання розробленої у розділі \ref{sec:3:model:development} програмної моделі мережі управління елементами індикації медіафасаду.

\subsection{Експерементальна перевірка відповідності програмної моделі до вимог стандарту \iee}
\label{sub:simulation_speed_test}

Перше модлелювання служитиме для перевірки відповідності створеної програмної моделі до вимог стандарту \iee. За результами цього моделювання буде прийняте рішення, чи може модель бути використована для подальших експеріментів.

Для перевірки відповідності створеної програмної до вимог стандарту \iee будемо оцінювати верхню границю пропускної спроможності та затримки передачі в мережі в режимах роботи \blm та \bem. Оцінка пропускної спроможності вже була наведена в пункті \ref{par:throughput:evaluation}, де були використовані результати інших робіт. У цьому пункті буде первірено правильність наведених раніше оцінок та правильність роботи моделі мережі \iee.

Параметри програмної моделі для моделювання режима роботи \blm вказані в таблиці \ref{tbl:simulation_settings_nonbeackon}.

\begin{table}[hbp]
\caption{Параметри моделювання режиму роботи \blm}
\centering
\begin{tabu} to \textwidth { |X|X| }
	\hline
	\col{|c|}{Параметер}                & \col{c|}{Значення}      \\ \hline
	Кількість вузлів в мережі           & 2                       \\ \hline
	Час моделювання, с                    & 60                      \\ \hline
	Розмір корисного навантаження, байт & 1..120                  \\ \hline
	Режим адресування, біт              & 16                      \\ \hline
	Режим підтвердження                 & Із та без підтвердження \\ \hline
	Режим роботи                        & \blm                    \\ \hline
\end{tabu}
\label{tbl:simulation_settings_nonbeackon}
\end{table}

Результати моделювання режима роботи \blm наведено на \cref{fig:result_test_speed_nonbeac_tp,fig:result_test_speed_nonbeac_jts}.

\begin{figure}[h]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_nonbeac/tp.pgf}
		\input{img/results/test_speed_nonbeac_tp.pgf}
	}
	\longcaption{\label{fig:result_test_speed_nonbeac_tp}Графік залежності корисної пропускної спроможності від розміру корисного навантаження кадру в режимі роботи \blm}
\end{figure}

\begin{figure}[h]
	\centering
	\adjustbox{max width=\textwidth}{
		\subfloat[\label{subfig:result_test_speed_nonbeac_ack_jts}]{
			% \input{/home/pashkoff/code/ns/my/test_speed_nonbeac/jts_ack.pgf}
			\input{img/results/test_speed_nonbeac_ack_jts.pgf}
		}
		\subfloat[\label{subfig:result_test_speed_nonbeac_noack_jts}]{
			% \input{/home/pashkoff/code/ns/my/test_speed_nonbeac/jts_noack.pgf}
			\input{img/results/test_speed_nonbeac_noack_jts.pgf}
		}
	}
	\longcaption{Графік затримки передачі в режимі роботи \blm та: \\
		\protect\subref*{subfig:result_test_speed_nonbeac_ack_jts} -- із~підтвердженням; 
		\protect\subref*{subfig:result_test_speed_nonbeac_noack_jts} -- без підтвердження
		}\label{fig:result_test_speed_nonbeac_jts}
\end{figure}

На графіках можна бачити, що параметри мережі в цілому відповідають оцінкам, що буди наведені в пункті \ref{par:throughput:evaluation}. Максимальна досягнута пропускна спроможність становить 168 Кбіт/с, що декілька вище ніж було розраховано у~\cite{thoroughput:analysis:unslotted:ieee}. 

На \cref{fig:result_test_speed_nonbeac_jts} зображена затримка передачі, розрахована як час між початком передачі та час між концем прийому. Видно, що середня затримка при відключеному підтвердженні прийома кадрів меньша, ніж при включеному підтвердженні.

Параметри програмної моделі для моделювання режима роботи \bem вказані в таблиці \ref{tbl:simulation_settings_beackon_cap}. 

\begin{table}[htbp]
\caption{Параметри моделювання режиму роботи \bem}
\centering
\begin{tabu} to \textwidth { |X|X| }
	\hline
	\col{|c|}{Параметер}                & \col{c|}{Значення} \\ \hline
	Кількість вузлів мережі             & 2                  \\ \hline
	Час моделювання, с                    & 60                 \\ \hline
	Розмір корисного навантаження, байт & 1,50,100,120       \\ \hline
	Режим режим адресування, біт        & 16                 \\ \hline
	Режим підтвердження                 & Без підтвердження  \\ \hline
	Режим роботи                        & \bem         \\ \hline
	Beacon order ($BO$)                              & 1,3,5,7            \\ \hline
	Superframe order ($SO$)                                 & $SO$ = $BO$ = 1,3,5,7  \\ \hline
\end{tabu}
\label{tbl:simulation_settings_beackon_cap}
\end{table}

В цьому експеременті передача проводилась виключно в періоді CAP. Оскільки $BO$ = $SO$, періода CFP та періода неактивності в superframe не було.

Результати моделювання режима роботи \bem наведено на \cref{fig:result_tp_beacon}.

\begin{figure}[htbp]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_beac_noack_var_boso/tp.pgf}
		\input{img/results/test_speed_beac_tp.pgf}
	}
	\longcaption{\label{fig:result_tp_beacon}Графік залежності корисної пропускної здатності від розміру корисного навантаження кадру при різних рівнях $BO$,$SO$ в режимі роботи \bem}
\end{figure}

На графіку можна бачити, що корисна пропускна збільшується при збільшенні параметрів $BO$ та $SO$. Це пояснюється зменьшенням частини часу, який тратиться на передачу маячка, до загального часу superframe. Але, також можна бачити, що при $BO=SO>=5$, рост корисної пропускної спроможності незначний, оскільки розмір superframe пропорційний квадрату $BO$, а час на передачу маячка не змінюється.

Таким чином, в мережах \bem, при повній утилизації superframe не має сенсу виставляти параметр $BO>5$. 

Оскільки результати моделювання відповідають вимогам стандарту технології \iee та оцінкам характеристик, що наведені у розглянутій в розділі \ref{sec:1} літературі, будемо використовувати розроблену програмну модель для оцінки характеристик протоколу мережі управління елементами медіафасаду.

\subsection{Моделювання роботи мережі при незначному рівні трафіку від Клієнтів до Сервера}
\label{sub:simulation_backtraf_nobeac}

Описаний в цьому підрозділі сценарій моделювання відповідає сценарію використання, що був описаний в пункті \ref{par:low:ntht}.

Ідеальний випадок, коли передачу в мережі веде лише координатор, є ідентичним випадку, коли координатор веде односторонню передачу одному вузлу. Цей випадок було промодельовано в підрозділі \ref{sub:simulation_speed_test}. Проведемо моделювання роботи мережі у випадках, коли трафік від Сервера до Клієнтів вимкнуто та ввімкнуто. Це дозволить дослідити вплив одночасової предачу трафіку у обох напрмках.

\paragraph{Моделювання роботи мережі при незначному рівні трафіку від Клієнтів до Сервера та без трафіка від Сервера до Клієнтів}

Проведемо моделювання випадку, у якому передачу в мережі ведуть усі вузли, окрім координатору. 

Параметри моделі наведено в таблиці \ref{tbl:simulation_backtraf_nobeac_nobrd}.


\begin{table}[htbp]
\caption{Параметри моделі мережі для моделювання роботи мережі при незначному рівні трафіку від Клієнтів до Сервера та без трафіка від Сервера до Клієнтів}
\centering
\begin{tabu} to \textwidth { |l|X| }
	\hline
	\col{|c|}{Параметер}                         & \col{c|}{Значення}              \\ \hline
	Кількість Клієнтів ($nn$)                      & 5, 50, 100                      \\ \hline
	Час моделювання, с                             & 10                              \\ \hline
	Режим режим адресування                      & 16 біт                          \\ \hline
	Режим підтвердження                          & Із підтвердженням               \\ \hline
	Режим роботи                                 & \blm                    \\ \hline
	Генератор трафіку                            & Application/Traffic/Exponential \\ \hline
	Розмір корисного навантаження ($size$), байт & 10                              \\ \hline
	Інтервал передачі ($interval$), с            & $0,005;\dots;1$                \\ \hline
\end{tabu}
\label{tbl:simulation_backtraf_nobeac_nobrd}
\end{table}



Результати моделювання можна бачити на \cref{fig:result_test_backtraf_nobeac_nobrd_tp,fig:result_test_backtraf_nobeac_nobrd_succ_rate}.

\begin{figure}[htbp]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_beac_noack_var_boso/tp.pgf}
		\input{img/results/test_backtraf_nobeac_nobrd_tp.pgf}
	}
	\longcaption{\label{fig:result_test_backtraf_nobeac_nobrd_tp}Графік залежності швидкості прийому на координаторі від середнього інтервалу відправки пакетів вузлами в режимі мережі \blm та без трафіка від Сервера до Клієнтів}
\end{figure}

\begin{figure}[htbp]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_beac_noack_var_boso/tp.pgf}
		\input{img/results/test_backtraf_nobeac_nobrd_succ_rate.pgf}
	}
	\longcaption{\label{fig:result_test_backtraf_nobeac_nobrd_succ_rate}Графік залежності долі успішно прийнятих координатором пакетів від середнього інтервалу відправки пакетів вузлами в режимі мережі \blm та без трафіка від Сервера до Клієнтів}
\end{figure}

На \cref{fig:result_test_backtraf_nobeac_nobrd_tp} показана залежність вхідної швидкості на координаторі від середнього інтервалу відправки пакетів вузлами при різній кількості Клієнтів в мережі. На графіку можно бачити, як швидкість достигає свого максимуму, після чого падає. З лівої сторони графіка можна бачити, що при велкій інтенсивності передачі, швидкість прийому дуже не стабільна.

На \cref{fig:result_test_backtraf_nobeac_nobrd_succ_rate} показана залежність долі успішно доставлених пакетів від середнього інтервалу відправки пакетів вузлами при різній кількості Клієнтів в мережі. На Графіку можна бачити, що доля успішно доставлених пакетів швидко падає при звеличені інтенсивності передачі. Порівнюючи \cref{fig:result_test_backtraf_nobeac_nobrd_tp} та \cref{fig:result_test_backtraf_nobeac_nobrd_succ_rate}, можно бачити, що максимальна швидкість досягається на рівні 70\% доставлених пакетів. Для мережі із 100 Клієнтів ця точка відповідає середньому інтервалу передачі 0,5 с.

\paragraph{Моделювання роботи мережі при незначному рівні трафіку від Клієнтів до Сервера та із трафіком від Сервера до Клієнтів}

Проведемо моделювання випадку, у якому в мережі будуть вести передачу одночасово як Сервер, так і Клієнти. Сервер веде передачу широкомовними пакетами, які повинні приймати всі Клієнти. Клієнти ведуть передачу до Сервера.

Параметри моделювання наведено в таблиці \ref{tbl:simulation_backtraf_nobeac_brd}.

\begin{table}[htbp]
\caption{Параметри моделі мережі для моделювання роботи мережі при незначному рівні трафіку від Клієнтів до Сервера та із трафіком від Сервера до Клієнтів}
\centering
\begin{tabu} to \textwidth { |l|X| }
	\hline
	\col{|c|}{Параметер}                         & \col{c|}{Значення}              \\ \hline
	Кількість Клієнтів ($nn$)                      & 5, 50, 100                      \\ \hline
	Час моделювання, с                             & 10                              \\ \hline
	Режим режим адресування                      & 16 біт                          \\ \hline
	Режим підтвердження                          & Із підтвердженням               \\ \hline
	Режим роботи                                 & \blm                    \\ \hline
	Генератор трафіку Клієнтів                     & Application/Traffic/Exponential \\ \hline
	Розмір корисного навантаження ($size$), байт & 10                              \\ \hline
	Середній інтервал передачі ($interval$), с   & $0,005;\dots;1$                 \\ \hline
	Генератор широкомовного трафіку              & Application/BroadcastbaseApp    \\ \hline
	Розмір корисного навантаження , байт         & 120                             \\ \hline
	Інтервал передачі ($bmsg\_interval$), с      & 0,012                           \\ \hline
\end{tabu}
\label{tbl:simulation_backtraf_nobeac_brd}
\end{table}

Інтервал передачі широкомовних пакетів (bmsg-interval) обрано таким згідно до рівняння \ref{eq:simulation_backtraf_nobeac_brd_bmsg_interval} із розрахунку, щоб зайняти половину полоси пропускання. Якщо прийняти максимальну корисну пропускну спроможність 160 Кбіт/с для пакетів розміром 120 байт та необхідну полосу пропускання $\frac{160}{2}=80$ Кбіт/с, тоді:

	% \label{eq:simulation_backtraf_nobeac_brd_bmsg_interval}
$	bmsg\_interval = \frac{1 \text{ с}}{\dfrac{80 \text{ Кбіт/с} \cdot 1000}{120 \text{ байт} \cdot 8 \text{ біт}}} = 0,012 \text{ c}$

Результати моделювання можна бачити на \cref{fig:result_test_backtraf_nobeac_brd_tp0,fig:result_test_backtraf_nobeac_brd_tp1,fig:result_test_backtraf_nobeac_brd_succ_rate,fig:result_test_backtraf_nobeac_brd_deliv}.



На \cref{fig:result_test_backtraf_nobeac_brd_tp0} показана залежність вхідної швидкості на Сервері від середнього інтервалу відправки пакетів Клієнтами при різній кількості Клієнтів в мережі. На графіку можно бачити, що, хоча досягнута швидкість меньша, ніж у попредньому моделюванні (\cref{fig:result_test_backtraf_nobeac_nobrd_tp}), але мережа поводить себе таким самим чином.
\begin{figure}[htbp]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_beac_noack_var_boso/tp.pgf}
		\input{img/results/test_backtraf_nobeac_brd_tp0.pgf}
	}
	\longcaption{\label{fig:result_test_backtraf_nobeac_brd_tp0}Графiк залежностi швидкостi прийому на Сервері вiд середнього iнтервалу вiдправки пакетiв Клієнтами в режимі мережі \blm}
\end{figure}


На \cref{fig:result_test_backtraf_nobeac_brd_tp1} показана залежність вхідної швидкості на Клієнті №1 від середнього інтервалу відправки пакетів Клієнтами при різній кількості Клієнтів в мережі. Клієнт №1 приймає широкомовні повідомлення від координатора. На графіку можно бачити, що при малому розмірі мережі та малій інтенсивності трафіку від Клієнті к хосту, трафік від Сервера до Клієнтів дійсно займає заплановану полосу пропускання 80 Кбіт/с. Але, при підвищенні нагрузки на мережу, Клієнт №1 починає втрачати пакети, через що вхідна швидкість падає. Це підтверджується і на \cref{fig:result_test_backtraf_nobeac_brd_succ_rate,fig:result_test_backtraf_nobeac_brd_deliv}, де показана залежність долі успішно прийнятих Клієнтами пакетів. На графіку видно, що із зменьшенням інтервалу відправки пакетів, доля успішно доставлених пакетів падає. Обидва графіки показють таку ж саму поведінку із зростанням навантаження. 

\begin{figure}[htbp]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_beac_noack_var_boso/tp.pgf}
		\input{img/results/test_backtraf_nobeac_brd_tp1.pgf}
	}
	\longcaption{\label{fig:result_test_backtraf_nobeac_brd_tp1}Графiк залежностi швидкостi прийому на Клієнті №1 вiд середнього iнтервалу вiдправки пакетiв Клієнтами в режимі мережі \blm}
\end{figure}

\begin{figure}[htbp]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_beac_noack_var_boso/tp.pgf}
		\input{img/results/test_backtraf_nobeac_brd_succ_rate.pgf}
	}
	\longcaption{\label{fig:result_test_backtraf_nobeac_brd_succ_rate}Графік залежності долі успішно прийнятих Сервером пакетів від середнього інтервалу відправки пакетів Клієнтами в режимі мережі \blm}
\end{figure}

\begin{figure}[htbp]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_beac_noack_var_boso/tp.pgf}
		\input{img/results/test_backtraf_nobeac_brd_deliv.pgf}
	}
	\longcaption{\label{fig:result_test_backtraf_nobeac_brd_deliv}Графік залежності долі успішно прийнятих Клієнтами пакетів від середнього інтервалу відправки пакетів Клієнтами в режимі мережі \blm}
\end{figure}


Проведені моделювання дозволяють підтвердити положення, що були наведені в пункті \ref{par:low:ntht}. Доки загальної пропускної спроможності мережі досить для того, щоб передати як трафік від Сервера до Клієнтів, так і трафік від Клієнтів до хоста, доля успішно доставлених пакетів наближається до 100\%. Але, коли мережа стає перенавантаженою, доля успішно доставлених пакетів різко зменьшується як у напрямку від Сервера до Клієнтів, так у зворотньому напрямку від Клієнтів до Сервера. Таким чином, якість обслуговування трафіку від Сервера до Клієнтів не може бути надійно забеспечена.


\subsection{Моделювання роботи мережі при значному рівні трафіку від Клієнтів до Сервера}
\label{par:simulation_backtraf_beac}

В цьмоу підрозділі наведені результати моделювання мережі в режимі роботи \bem при значному рівні трафіку від Клієнтів до Сервера. Описаний в цьому підрозділі сценарій відповідає сценарію використання, що був описаний в пункті \ref{par:high:ntht}.

Передачу даних в мережі, що симулюється, ведуть одночасно і Сервер, і Клієнти. Сервер веде передачу в виділенному для нього інтервалі GTS протягом періоду CFP, Клієнти ведуть передачу протягом періоду CAP. Виділений для Сервера інтервал GTS є єдиний і займає весь період CFP.

Параметри моделювання наведено в таблиці \ref{tbl:simulation_backtraf_beac_brd}.

\begin{table}[htbp]
\caption{Параметри моделі мережі для моделювання роботи мережі при значному рівні трафіку від Клієнтів до Сервера}
\centering
\begin{tabu} to \textwidth { |p{0.55\textwidth}|X| }
	\hline
	\col{|c|}{Параметер}                         & \col{c|}{Значення}              \\ \hline
	Кількість Клієнтів ($nn$)                    & 5, 50                           \\ \hline
	Час моделювання, с                             & 10                              \\ \hline
	Режим режим адресування                      & 16 біт                          \\ \hline
	Режим підтвердження                          & Із підтвердженням               \\ \hline
	Режим роботи                                 & \bem                     \\ \hline
	Beacon order ($BO$)                                           & 5                               \\ \hline
	Superframe order ($SO$)                                           & 5                               \\ \hline
	Розмір GTS для Сервера, слотів                       & 8                               \\ \hline
	Генератор трафіку Клієнтів                   & Application/Traffic/Exponential \\ \hline
	Розмір корисного навантаження трафіку Клієнтів ($size$), байт & 10                              \\ \hline
	Середній інтервал передачі ($interval$), с   & $0,001;\dots;1$                 \\ \hline
	Генератор широкомовного трафіку              & Application/BroadcastbaseApp    \\ \hline
	Розмір корисного навантаження трафіку Сервера($bmsg\_size$), байт         & 120                             \\ \hline
	Інтервал передачі ($bmsg\_interval$), с      & 0,012                           \\ \hline
\end{tabu}
\label{tbl:simulation_backtraf_beac_brd}
\end{table}

Розмір GTS для Сервера обрано таким чином, щоб залишити половину часу superframe під період CAP. Таким чином, параметри генератора  трафіка Сервера  дорівнють параметрам, що були використані при попередньому моделюванні в підрозділі \ref{sub:simulation_backtraf_nobeac}. Розмір $BO$ та $SO$ обрано за результатми, що були отримані в підрозділі \ref{sub:simulation_speed_test}, таким чином, щоб знизити вплив необхідності відправки кадрів beacon на загальну корисну пропускну спроможність мережі.

Параметри генератора трафіка, що використовується на Клієнтах, було взято із попереднього моделювання, що було розглянуте у підрозділі \ref{sub:simulation_backtraf_nobeac}.

На відміну від попередніх розглянутих моделювань, в цьому моделюванні розглядалися мережі розміром тільки 5 та 50. % Причиною цього є аварійні откази симулятора ns-2, що були отримані під час моделювання мережі розміром 100 Клієнтів. Ці откази вказують на те, що в програмному коді симулятора наявні помилки. Причину отказів знайти не вдалося.

Результати моделювання можна бачити на \cref{fig:result_test_backtraf_beac_brd_tp0,fig:result_test_backtraf_beac_brd_tp1,fig:result_test_backtraf_beac_brd_succ_rate,fig:result_test_backtraf_beac_brd_deliv}.

\begin{figure}[hbp]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_beac_noack_var_boso/tp.pgf}
		\input{img/results/test_backtraf_beac_brd_tp0.pgf}
	}
	\longcaption{\label{fig:result_test_backtraf_beac_brd_tp0}Графiк залежностi швидкостi прийому на Сервері вiд середнього iнтервалу вiдправки пакетiв Клієнтами в режимі роботи мережі \bem}
\end{figure}

На \cref{fig:result_test_backtraf_beac_brd_tp0} показана залежнiсть вхiдної швидкостi на Сервері вiд середнього iнтервалу вiдправки пакетiв Клієнтами при рiзнiй кiлькостi Клієнтів в мережi. На \cref{fig:result_test_backtraf_beac_brd_succ_rate} показана залежність долі успішно прийнятих Сервером пакетів, що були відправлені Клієнтами. Поведінка трафіку від Клієнтів до Сервера в мережі відповідає поведінці, що спостерігалася під час попредньої моделювання і наведена, відповідно, на \cref{fig:result_test_backtraf_nobeac_brd_tp0,fig:result_test_backtraf_nobeac_brd_succ_rate}. 

\begin{figure}[hbp]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_beac_noack_var_boso/tp.pgf}
		\input{img/results/test_backtraf_beac_brd_succ_rate.pgf}
	}
	\caption{\label{fig:result_test_backtraf_beac_brd_succ_rate}Графік залежності долі успішно прийнятих Сервером пакетів від середнього інтервалу відправки пакетів вузлами в режимі мережі \bem}
\end{figure}


На \cref{fig:result_test_backtraf_beac_brd_tp1} показана залежнiсть вхiдної швидкостi на Клієнті №1 вiд середнього iнтервалу вiдправки пакетiв вузлами при рiзнiй кiлькостi Клієнтів в мережi. На \cref{fig:result_test_backtraf_beac_brd_deliv} показана залежність долі успішно прийнятих вузлами пакетів, що були відправлені Сервером. З графиків видно, що трафік від Клієнтів до Сервера ніяк не впливає на трафік від Сервера до Клієнтів. Мережа здатна підтримувати задану корисну пропускну спроможність. Доля успішно доставлених пакетів наближається до 100%.

\begin{figure}[bp]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_beac_noack_var_boso/tp.pgf}
		\input{img/results/test_backtraf_beac_brd_tp1.pgf}
	}
	\longcaption{\label{fig:result_test_backtraf_beac_brd_tp1}Графiк залежностi швидкостi прийому на вузлі №1 вiд середнього iнтервалу вiдправки пакетiв вузлами в режимі мережі \bem}
\end{figure}

\begin{figure}[htbp]
	\centering
	\adjustbox{max width=\textwidth}{
		% \input{/home/pashkoff/code/ns/my/test_speed_beac_noack_var_boso/tp.pgf}
		\input{img/results/test_backtraf_beac_brd_deliv.pgf}
	}
	\longcaption{\label{fig:result_test_backtraf_beac_brd_deliv}Графік залежності долі успішно прийнятих вузлами пакетів від середнього інтервалу відправки пакетів вузлами в режимі мережі \bem}
\end{figure}


Проведена симуляція дозволяє підтвердити положення, що були наведені в пункті \ref{par:high:ntht}. Передача даних протягом періоду CFP дозволяє досягнути наперед встановлених вимог щодо якості обслуговування в мережі. 

\subsection{Висновки до  четвертого розділу}

У цьому розділі була проведена експерементальна перевірка характеристик протоколу для мережі управління елементами індикації медіафасаду за допомогою програмної моделі, що була побудована на базі середовища моделювання ns-2.

З початку було проведено експерементальну перевірку відповідності характеристик побудованої програмної моделі до вимог стандарту технології \iee та наведених у інших посиланнях характеристик. За результатами перевірки було встановлено, що характеристики побудованої програмної моделі відповідають тим, що були розглянуті у розділі \ref{sec:ieee:standard:analysis}. Досягнута максимальна пропускна спроможність  168 Кбiт/с є декілька більшою за спроможність, досягнуту у розрахунках \cite{thoroughput:analysis:unslotted:ieee}, але не заперечує вимогам стандарту. Затримка передачі відповідає розрахунками \cite{thoroughput:analysis:unslotted:ieee}. Поведінка мережі при збільшенні beacon order та superframe order відповідає поведінці, що була доглянута у \cite{simulation:study:slotted:ieee}. Побудовану програмну модель мережі визнано придатною для подальших експерементів.

Побудована модель була використана для перевірки положень сценарії використання, що були наведені у пунктах \ref{par:low:ntht} та \ref{par:high:ntht}. Результати моделювання відповідають очікуваним.

При використанні мережі в режимі роботи \blm спостерігалося очікуване погіршення забеспечення якості обслуговування трафіку в обох напряках при збільшенні навантаження. Оскільки мережа не може гарантувати якость обслуговування трафіку від Сервера до Клієнтів, її доцільно використовувати тільки при незначному рівні навантаження трафіку від Клієнтів до Сервера.

При використанні мережі в режимі роботи \bem спостерігалась очікувана незалежність якості обслуговування трафіку від Сервера до Клієнтів від  рівню навантаження трафіку від Клієнтів до Сервера. Режимі роботи \bem підходить до використання при значному рівні навантаження трафіку від Клієнтів до Сервера.

\section{Охорона праці та безпека в надзвичайних ситуаціях}
\label{sec:work_safety}

\subsection{Обґрунтування вибору об'єкта}

Основним завданням дипломної роботи є дослідження та розробка протоколів бездротових мереж на основі стандарту \iee для управління елементами індикації медіафасаду. Виконання дипломної роботи вимагає використання персональної електронно-обчислюваної машини (ПЕОМ), тому в якості об'єкта дослідження обрано умови праці в машинній залі обчислювального центру, що складається з ПЕОМ і робочого місця розробника.

Стисла характеристика об'єкту дослідження: приміщення площею $28 \text{ м}^2$ обладнане однією спліт системою для кондиціювання повітря; приміщення обладнано трьома вікнами; штучне освітлення: 6 світильників із двома лампами Philips G13 36W/54 TLD потужністю 80 Вт.


\subsection{Аналіз небезпечних і шкідливих виробничих факторів на робочому місці та розробка заходів спрямованих на усунення чи зниження шкідливого впливу виявлених факторів}

\paragraph{Повітря робочої зони}

Повітря робочої зони характеризується мікрокліматичними параметрами середовища, до яких прийнято відносити температуру повітря, вологість і швидкість його руху, а також барометричним тиском і швидкістю його зміни, тепловими випромінюваннями, наявністю шкідливих речовин, аерофонів, пилу, які суттєво впливають на функціональну діяльність людини, її самопочуття, здоров'я і на надійність роботи обчислювальної техніки \cite{work:safety:17}. 

На робочому місці джерелами тепловиділень є: обчислювальний обладнання, прилади освітлення, обслуговуючий персонал, а також сонячна радіація. Причому основним тепловиділяючим обладнанням є ПЕОМ, які дають в середньому 80\% сумарних тепловиділень. Тепловиділення від приладів освітлення складають в середньому 12\%, від обслуговуючого персоналу~--- 1\%, від сонячної радіації~--- 6\%. Приплив теплоти через непрозорі огороджувальні конструкції становить 1\%.

На робочому місці для ліквідації недоліків повітря робочої зони використовується протяго-витяжна вентиляція й кондиціонування повітря за допомогою спліт-системи, яка забезпечує фільтрацію підвищеної запиленості повітря робочої зони, регулювання температури поверхні чи устаткування матеріалів і регулювання вологості, а також загально обмінна вентиляція.

Усі параметри повітря робочої зони відповідають нормативам згідно із  ДСТУ 12.1.005-78 «Загальні санітарно-гігієнічні вимоги до повітря робочої зони»

\paragraph{Мікрокліматичні параметри}

При виконанні робіт операторського типу, пов'язаних з нервово-емоційним напруженням в кабінетах, пультах і постах керування технологічними процесами, в залах обчислювальної техніки та інших приміщеннях повинні дотримуватися оптимальні умови мікроклімату (температура повітря 22-24$\,^{\circ}\mathrm{C}$, відносна вологість 60-40\%, швидкість руху повітря не більш 0,1 м/с) \cite{work:safety:17}.

На робочому місці згідно технічним вимірюванням температура повітря складає 22 , вологість повітря 40\%, швидкість руху повітря 0,05 м/с.

Сталість параметрів повітряного середовища забезпечує надійну роботу ПЕОМ, тривале зберігання носіїв інформації, комфортні умови для обслуговуючого персоналу. На робочому місці для ліквідації недоліків повітря робочої зони використовується сучасна система кондиціювання у спліт-системи Gree GWH09NA-K1NNA4A. Параметри мікроклімату відповідають нормативам встановлених ДСН 3.3.6.042-99 «Державні санітарні норми мікроклімату виробничих приміщень» та ДСТУ 12.1.005-78 «Загальні санітарно-гігієнічні вимоги до повітря робочої зони».

\paragraph{Шум}

На робочому місці джерелами шуму є периферійні пристрої, вентиляційні системи охолодження. Робоче місце оператора відноситься до виду 1~--- творча діяльність, наукова діяльність, конструювання і проектування, програмування.

Для захисту від шуму вентиляторів корпус системного блоку, щита управління, блоку серверів виконують зі звукоізоляційного матеріалу. 

Показник рівня шуму дорівнює 65 dB, що відповідає нормативним значенням ДСТУ 2867-94 «Шум. Методи оцінювання. Виробничого шумового навантаження. Загальні вимоги».

\paragraph{Освітлення}

На робочому місці для штучного освітлення застосовано 4 світильників із двома лампами Philips G13 36W/54 TLD потужністю 80 Вт. 

Передбачена проектом освітленість для роботи з екраном дисплея складає 200 лк, а при роботі з екраном у сполученні з роботою над документами~--- 400 лк.

Для забезпечення природного освітлення, робоче місце обладнане трьома вікнами розміром $2\times3$ м. Показник освітленості дорівнює 385 лк, що відповідає нормативним значенням, згідно із ДБН В.2.5-28-2006 «Природне і штучне освітлення».

\paragraph{Вібрація}

На робочому місці причинами вібрації є вібрація систем охолодження, вентиляція, периферійні пристрої. Основним джерелом вібрації є вентилятори, розташовані в системному блоці, щитах управління, щиту серверів. Робота оператора ПЕОМ відноситься до категорії 3 тип «в».

Для захисту від впливу вібрації  на робочому місці застосовуються різні неметалеві віброізолятори: пластмасові і гумові прокладки, які встановлюються між підставкою пристрою й опорною поверхнею. Настільні апарати, принтер, встановлений на м'який килимок із синтетичного матеріалу, а ніжки столів~--- на прокладки з м'якої гуми.

Параметри вібрації відповідають нормативам, що визначені у ДСТУ 2300-93 «Вібрація. Терміни та визначення».

\paragraph{Електромагнітне та іонізуюче випромінювання}

На робочому місці у якості джерел електромагнітного та іонізуючого випромінювання виступають трансформатор джерел електропостачання.


Для захисту оператору від впливів випромінювання застосовуються наступні заходи \cite{work:safety:17}:

\begin{enumerate}
	\item віддалення робочого місця від джерела ПЕМП;
	\item захист часом.
\end{enumerate}

Нормування визначається згідно ГОСТ 12.1.002-84 «Электрические поля промышленной частоты. Допустимые уровни напряженности и требования к проведению контроля на рабочих местах» та ГОСТ 12.1.006-84 «Электромагнитные поля радиочастот. Допустимые уровни на рабочих местах и требования к проведению контроля».

\paragraph{Електробезпека}

На робочому місці передбачено захисне відключення електроенергії у випадку перевищення допустимого навантаження, а також всі заземлені конструкції (батареї опалення,  водопровідні труби, кабелі із заземленим відкритим екраном), надійно захищені діелектричними щитками та сітками з метою не допущення потрапляння працівника під напругу, розводка мережі виконана за трифазною схемою з встановленням штепсельних розеток на струм не менше 10~А із захисним контактом, також використовуються кабелі та проводи з мідними жилами з січенням 1,5.

Електробезпека будівель та приміщень, де розміщені робочі місця операторів, повинна відповідати вимогам НПАОП 40.1-1.21-98 «Правила безпечної експлуатації електроустановок споживачів». Технічні та організаційні засоби та міри з електробезпеки повинні відповідати вимогам ДСТУ 7237:2011~--- «Система стандартів безпеки праці. Електробезпека. Загальні вимоги та номенклатура видів захисту».

\paragraph{Пожежна безпека}

На робочому місці для забезпечення пожежної безпеки використовують організаційні, експлуатаційні, технічні заходи що до протипожежного захисту. Для забезпечення пожежної безпеки  приміщення оснащено вуглекислотними вогнегасниками та пожежною сигналізацією.

Робоче місце відповідно до НПАОП 0.00-1.28-10 «Правила охорони праці під час експлуатації електронно-обчислювальних машин» вимоги  щодо пожежної безпеки будівель та приміщень, де розміщені робочі місця, обладнані ПЕОМ з ВДТ і ПП, відповідає усім вимогам встановлених ДБН В.1.1.7-2002 «Пожежна безпека  об'єктів будівництва» та НАПБ А.01.001-2004 «Правилами пожежної безпеки України».

\subsection{Розрахунок нормованої освітленості в навчальній аудиторії}

Для розрахунку нормованої освітленості скористаємося методом коефіцієнта використання \cite{work:safety:18}.

Рекомендована величина нормованої освітленості для аудиторій, учбових кабінетів, лабораторій в технікумах та вищих навчальних закладах за ДБН В.2.5-28-2006 становить 400~лк. За тією ж будівельною нормою клас та підклас зорової роботи у таких приміщеннях~--- А-2.

Площа аудиторії, в якій визначається нормована освітленість має наступні габарити: $A = 6$ м, $B = 4,7$ м, $H = 3$ м. Аудиторія освітлюється газорозрядними лампами.

Коефіцієнт використання світлового потоку розраховується за формулою:
\begin{equation}
	\eta = \frac{i^2}{i^2 + c} \text{ ,}
\end{equation}

де $i$~--- індекс приміщення;

$b$ і $c$~--- коефіцієнти, значення котрих при середньому значенні ККД світильників є денним типом КСС $b=1,3;\:c = 0,29$. Для КСС типу Г, при коефіцієнтах відбивання, що приймають значення $\rho_n = 1,3;\: \rho_c=0,5;\: \rho_p=0,3$.

Індекс приміщення визначається за формулою:
\begin{equation}
	i = \frac{S}{(A + B)H} \text{ .}
\end{equation}

Розрахуємо індекс приміщення: 

$i = \frac{6 \cdot 4,7}{(6 + 4,7) \cdot 3} = 0,87 $.


Розрахуємо коефіцієнт використання світлового потоку:

$\eta = \frac{0,87^2}{1,3^2 + 0,29} = 0,38$ .


Рівняння еквівалентної площі:
\begin{equation}
	S_e = \frac{S \cdot k_\text{з} \cdot z}{\eta} \text{ ,}
\end{equation}

де $k_\text{з}$~--- коефіцієнт запасу, що враховує зниження освітленості у процесі експлуатації;

$z$~--- коефіцієнт мінімальної освітленості.


При концентрації пилу у повітрі від 1 до 5 мг/м$^3$ $k_\text{з} = 1,8$. Для люмінесцентних ламп $z = 1,1$.

Розрахуємо еквівалентну площу:

$S_e  = \frac{28,2 \cdot 1,8 \cdot 1,1}{0,38} = 122,44 $.


Розрахуємо мінімальну відстань між світильниками:
\begin{equation}
	L_0 = \lambda_0 \cdot H \text{ ,}
\end{equation}

де $\lambda_0 = 1$ для КСС типу Г. 

$L_0  = 1 \cdot 3 = 3\text{ м} $.


Визначимо оптимальну кількість світильників:
\begin{equation}
	N_0 = \frac{S}{L_0^2}  \text{ .}
\end{equation}

$N_0  = \frac{28,2}{3^2} = 3,13 $.


Визначимо необхідний світловий потік світильника:
\begin{equation}
	\Phi_C = \frac{S_e \cdot E_H}{N_0}  \text{ .}
\end{equation}

$\Phi_C  = {122,44 \cdot 400}{3} = 16325 \text{ лм} $.


Визначимо освітленість, що створюється одним світильником:
\begin{equation}
	E_l = \frac{n \cdot \Phi}{S_e} \text{ .}
\end{equation}

Аудиторії оснащенні чотирьма світильниками із газорозрядними лампами потужністю $p=80$ Вт, зі світловим потоком $\Phi=5220$ лм та кількістю ламп $n=2$.

$E_l = \frac{2 \cdot 5220}{122,44} = 85,26$


Розрахуємо величину нормованої освітленості: 
\begin{equation}
	E = E_l \cdot N \text{ .}
\end{equation}

$E = 85,26 \cdot 4 = 341,04$.

Визначимо відносну похибку освітленості від нормованої:
\begin{equation}
	\varepsilon = \left( \frac{E}{E_H} - 1 \right) \cdot 100\% \text{ .}
\end{equation}

$\varepsilon = \left( \frac{341,04}{400} -1 \right) \cdot 100\% = -14,74\%$


Визначена похибка не перевищує допустимої похибки у 20\%, тому величина освітленості у даній аудиторії відповідає нормі.

\subsection{Поводження у надзвичайних ситуаціях}

\paragraph{Початкові дані}

Площа основних приміщень: $S_{\text{осн}} = 316\:\text{м}^2$.

Площа допоміжних приміщень: $S_{\text{доп}} = 90\:\text{м}^2$.

Висота приміщення: $h = 2,4\:\text{м}$.

Найбільша робоча зміна $N_p = 630\:\text{людей}$.

Температура повітря $T_{\text{пов}} = 20\,^{\circ}\mathrm{C}$.

ФВО: ФВК 3 комплекти та ЕРВ-72-2 1 комплект.

Кількість людей, що не встигла укритися: $N_{\text{несв. укр.}} = 15$.

Кількість людей, що не встигли укритися із-за слабого навчання: $N_{\text{не навч}} = 15$.

\paragraph{Оцінка захисної споруди за місткістю}

Розрахуємо загальну площу приміщень:
\begin{equation}
	S_{\text{занг}} = S_{\text{осн}} + S_{\text{доп}} \text{ .}
\end{equation}

$ S_{\text{занг}} = 316 + 90 = 406\:\text{м}^2$

Так як висота приміщення $h = 2,4\:\text{м}$, то у сховищі встановлені двох'ярусні нари. Визначимо місткість сховища по площі:
\begin{equation}
	M_S = \frac{S_{\text{осн}}}{0,5} \text{ .}
\end{equation}

$M_S = \frac{316}{0,5} = 632\:\text{місця}$


Визначимо місткість сховища по об'єму усіх приміщень в зоні герметизації:
\begin{equation}
	M_V = \frac{S_{\text{заг}} \cdot h}{1,5} \text{ .}
\end{equation}

$M_V = \frac{406 \cdot 2,4}{1,5} = 650\:\text{місць}$

$M_\Phi = \min(M_S, M_V)$, тому $M_\Phi = 632\:\text{місця}$.

Визначимо коефіцієнт місткості:
\begin{equation}
	k_M = \frac{M_\Phi}{N_p} \text{ .}
\end{equation}

$k_M = \frac{632}{630} = 1,0003$

$k_M \geq 1$, це означає, що захисна споруда забезпечує укриття найбільшої робочої зміни.

\paragraph{Оцінка захисних споруд за життєзабезпеченням}

Середня температура найтеплішого місяця складає $20\,^{\circ}\mathrm{C}$, виходячи із цього норма зовнішнього повітря, що подається в захисну споруду~--- $8\:\text{м}^3/\text{люд}$.

Визначимо загальну кількість повітря, що подається системою в годину для режиму I та II.

Режим І: $W_\text{заг} = 3 \cdot 1200 + 1 \cdot 900 = 4500 \:\text{м}^3/\text{г}$.

Режим ІІ: $W_\text{заг} = 3 \cdot 300 = 900 \:\text{м}^3/\text{г}$.

Визначимо кількість людей, яких система зможе забезпечити чистим повітрям у режимах І та ІІ:
\begin{equation}
	N_\text{заг. пов} = \frac{W_\text{заг}}{W_\text{кільк. пов}} \text{ .}
\end{equation}

Режим І: $N_\text{заг. пов} = \frac{4500}{8} = 563 \:\text{люд}$

Режим ІІ: $N_\text{заг. пов} = \frac{900}{2} = 450 \:\text{люд}$

Визначимо показник, що характеризує життєзабезпечення людей в режимах І та ІІ:
\begin{equation}
	K_\text{ж.з} = \frac{N_\text{заг. пов}}{N} \text{ .}
\end{equation}

Режим І: $K_\text{ж.з} = \frac{563}{632} = 0,89$.

Режим ІІ: $K_\text{ж.з} = \frac{450}{632} = 0,71$.

$K_\text{ж.з} < 1$, з цього випливає, що кількість фільтровентиляційних комплектів недостатня для забезпечення чистим повітрям по нормам режимах І та ІІ. Необхідно прийняти заходи по збільшенню кількості фільтровентиляційних комплектів до необхідних норм повітропостачання.

\paragraph{Оцінка захисних споруд за своєчасним укриттям людей}

Визначимо кількість людей, що встигли своєчасно укритися:
\begin{equation}
	N_\text{св. укр.} = N_p - N_\text{несв. укр.} - N_\text{не навч} \text{ .}
\end{equation}

$N_\text{св. укр.} = 630 - 15 - 18 = 597 \:\text{чол}$

Визначимо показник, що характеризує інженерний захист за своєчасним укриттям персоналу робочої зміни, тобто коефіцієнт своєчасного укриття:
\begin{equation}
	K_\text{св. укр.} = \frac{N_\text{св. укр.}}{N_p} \text{ .}
\end{equation}

$K_\text{св. укр.} = \frac{597}{630} = 0,95$

$K_\text{св. укр.} < 1$, з цього випливає, що захисні споруди розташовані на відстані, коли не усі робочі встигають своєчасно укритися у сховищі.

\subsection{Висновки до п'ятого розділу}

У розділі охорони праці було проведено:

\begin{itemize}
	\item аналіз небезпечних і шкідливих факторів на робочому місці та розроблено заходи спрямовані на усунення чи зниження шкідливого впливу виявлених факторів;
	\item розрахунок нормованої освітленості в навчальній аудиторії;
	\item аналіз захисних споруд за місткістю, за життєзабезпеченням та своєчасним укриттям людей. 
\end{itemize}

\sectionnonum{Висновки}

В дипломній роботі вирішена актуална задача розробки і дослідження протоклів на основі стандарту \iee для управління елементами індикації медіафасаду.

Було проведено дослідження сучаних систем медиа фасадів. На базі цього досліження біло виявлено вимоги щодо системи управління елементами індикації ad-hoc медиа фасаду. Була проведена оцінка насупних технологій бездротових мереж: Bluetooth, Wi-Fi, UWB, \iee. Враховуючи вимоги системи управління, для використання у якості канала зв'язку була обрана технологія \iee. Для розробки програмної моделі мережі бів обраний мережевий симулятор ns-2.

Був проведений аналіз архітектури системи ad-hoc медіафасаду. Було виявлено, що для даної архітектури найкращим образо підходить мережа топології "<зірка">. В мережі було виявлено два напрямки трафіку: від Сервера к Клієнтам та від Клієнтів к Серверу. Тарфік від Сервера к Клієнтам визначено як високоприоритетний.

Було розглянуто два сценарії навантаження мережі. У першому, основну частину навантаження займає трафік від Сервера к Клієнтам. Для цього сценарію використання було запропановано використовувати мережу \blm. При цьому, вважається, що доля трафіку від Вузів к Серверу~--- незначная.

Було розглянуто також і зворотній випадок, коли доля трафіку від Клієнтів к Серверу велика. Оскільки трафік Сервера к Клієнтам є високоприоритетним, запропанована вести передачу цього трафіку у періодах CFP. Це дозволяє досягти гарантованої якості обслуговування цього виду трафіку, незаллежно від навантаження на мережу під час періоду CAP.

Запропанована схема розсилання пакетів оновлення візуализації від Сервера до Клієнтів. Згідно до запропонованої схеми, окремі оновлення візуализації об'єднуються в один пакет, тобто мультиплексуються. Таким чином досягається повна утилизація каналу зв'язку. Була надана оцінка можливого макисмального розміру мрежі, що використовує запропоновану схему.

На базі мережевого симулятору ns-2 виконано програмну реалізацію моделі бездротової мережі на базі стандарті \iee для системи управління елементами індикації медиа фасаду. Виконана модель була використана для перевірки характеристик мережі і її поведінки при різних режимах роботи і навантаження. Результати сисмуляції підтримують положення, що були запропоновані під час розробки протоколу.



% \bibliographystyle{IEEEtran}
% \providecommand*{\url}[1]{{#1}}
% \providecommand*{\BibUrl}[1]{\url{#1}}    
\urlstyle{same}
\bibliographystyle{ugost2003}
\bibliography{fp}

\ESKDappendix{}{Програмний код скрипту сценарію моделювання}
\label{sec:app_a:script}



\end{document}


