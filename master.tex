\documentclass[a4paper,ukrainian,utf8,nocolumnsxix,floatsection]{eskdtext}


% \newcommand{\No}{\textnumero}

\usepackage[utf8]{inputenc}
% \usepackage[english,russian,ukrainian]{babel}
\usepackage{cmap}
\usepackage[T2A]{fontenc}

\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{xspace}

\usepackage{todonotes}
\usepackage{showkeys}
\usepackage[unicode]{hyperref}

\usepackage{tabu}

\usepackage{cleveref}

%\usepackage{layouts}
% Use to probe lists
%\begin{figure}
% \currentlist
%% \listdiagram
%\listdesign
%\caption{List parameters}
%\end{figure}


\usepackage{cite}
% \usepackage{doi}


\usepackage{pdfpages}

\usepackage{pscyr}
\renewcommand{\rmdefault}{ftm}

% полуторный интервал
\usepackage{setspace}
\setstretch{1.5}

\setlength{\parindent}{1.25cm}

\usepackage{adjustbox}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows}
\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}

% toc settings
\usepackage{tocloft}
\renewcommand{\cfttoctitlefont}{\hfil \MakeUppercase} % center title, font
% entry indents
\renewcommand{\cftsecindent}{0em}
\renewcommand{\cftsubsecindent}{0em}
\renewcommand{\cftsubsubsecindent}{0em}

\renewcommand{\cftbeforesecskip}{0em}       % no skip before section 
\renewcommand{\cftsecfont}{}                % no bold section
\renewcommand{\cftsecleader}{\cftdotfill{\cftsecdotsep}} % dots are not bold
\renewcommand{\cftsecdotsep}{\cftdotsep}    % dots for section
\renewcommand{\cftsecpagefont}{}
% end toc settings

% list settings
\usepackage{enumitem}
% \setlist{nolistsep, leftmargin=0em, itemindent=\labelwidth}
\setlist{nolistsep, leftmargin=0em, itemindent=1.85cm}
\AddEnumerateCounter{\Asbuk}{\@Asbuk}{\CYRM}
\AddEnumerateCounter{\asbuk}{\@asbuk}{\cyrm}
% end list settings

% \ESKDdepartment{Одеський національний політехнічний університет}
% \ESKDcompany{завод имени И.~А.~Лихачева}
% \ESKDclassCode{31 1398}
\ESKDtitle{Пояснювальна записка до дипломної роботи магістра}
\ESKDdocName{}
\ESKDsignature{ІС ДР 8.05010101 004 ПЗ}
\ESKDauthor{Ільїн~П.~О.}
% \ESKDtitleApprovedBy{Руководитель ОКБА}{Гусев~И.~И.}
% \ESKDtitleAgreedBy{Директор АМО ЗИЛ}{Иванов~И.~И.}
% \ESKDtitleDesignedBy{Главный инженер АМО ЗИЛ}{Петров~И.~И}
% \ESKDtitleDesignedBy{Руководитель разработки}{Лист~А.~А}

% фікси до eskd
\ESKDsectAlign{section}{Center}
\ESKDsectStyle{section}{\normalfont\MakeUppercase}
\ESKDsectStyle{subsection}{\normalfont}
\ESKDsectStyle{subsubsection}{\normalfont}

% spacing before/after headings
\def\sectSkipVal{4.1ex}     % magic number
\ESKDsectSkip{section}{\sectSkipVal}{\sectSkipVal}
\ESKDsectSkip{subsection}{\sectSkipVal}{\sectSkipVal}
\ESKDsectSkip{subsubsection}{\sectSkipVal}{\sectSkipVal}

\let\stdESKDtheColumnI\ESKDtheColumnI
% \renewcommand\ESKDtheColumnI{\ESKDfontIII\stdESKDtheColumnI}

\renewcommand\ESKDcolumnVIIname{Арк.}

\renewcommand\paragraph{\subsubsection}

% начать каждую секцию с новой строки
\let\stdsection\section
\renewcommand\section{\clearpage\stdsection}

% секція без номера, але в TOC
\newcommand{\sectionnonum}[1]{\section*{#1}\addcontentsline{toc}{section}{#1}}

% 
\newcommand{\todoi}[1]{\todo[inline]{#1}}
\newcommand{\figref}[1]{рис.~\ref{#1}}

\newcommand{\iee}[0]{IEEE~802.15.4\xspace}
\newcommand{\csma}[0]{CSMA/CA\xspace}

\newcommand{\engtxt}[1]{\foreignlanguage{english}{#1}}

\begin{document}
% \selectlanguage{ukrainian}


% \maketitle
\ESKDthisStyle{empty}
\includepdf[pages={1}]{titul/titul.pdf}

\ESKDthisStyle{formII}
% no page number on toc page: http://tex.stackexchange.com/a/2996/31897
\addtocontents{toc}{\protect\thispagestyle{empty}} 
\tableofcontents

% \newpage

\sectionnonum{Вступ}

% Індивідуальне завдання з практики відповідає темі дипломного проекту, яка  формулюється як «Дослідження та розробка протоколів бездротових мереж на основі стандарту \iee для управління елементами індикації медіа фасаду». Результати можуть бути далі використані в дипломному проекті. В результаті виконання індивідуального завдання з практики був проведений огляд існуючих методів аналогів в області дослідження, запропонована методика вирішення поставленої задачі, розроблена програма на базі обраного алгоритму, проведено порівняльний аналіз та тестування системи.

\section{Аналіз сучасного стану проблеми контроля елементів медіафасадів} % (fold)
\label{sec:1}

\subsection{Медіа фасади}

\todoi{
Історія, класифікація

adhoc медіа фасад, посилання на мою сттатю на idaacs

blinken lights

требования к мобильним вузлам и к кааналам связи
}


\subsection{Огляд технологій бездротового звя’зку}

Протягом останніх 10-20 років була розроблена велика кількість різноманітних стандартів та технологій для систем, які потребують бездротового зв’зку. Оскільки, коло задач дуже широке і потреби систем відрізняються, розроблені стандарти часто вирішують різні задачі або пропонуютьрішення одних й тих самих задач різними методами. Розглянемо декілька доступних технологій і оцінемо їх придатність для використання в системі управління елементами індикації медіа фасаду. Огляд та порівняння підготовлено за матеріалами \todo{link}

% Comparaitive_Wireless_Standards.pdf
% Kniga-w01.pdf

Далі будуть наведені деякі відомості про доступні технології бездротового зв’язку.

\paragraph{Bluetooth та Bluetooth Low Energy} % (fold)
\label{par:bluetooth_bluetooth_low_energy}

Технологія Bluetooth використовується для обміну даними між Bluetooth-спроможними пристріями в персональних радіомережах. 

Технологія розробляється групою компаній Bluetooth Special Interest Group (Bluetooth SIG). З 2002 по 2005 діяла робоча група IEEE 802.15.1 по стандартизації технології, але на даний момент робота групи припинена і розробка спеціфікацій ведеться під контролем SIG.

Для зв’язку в технології Bluetooth використовується ISM диапазон радіочастот 2,4 ГГц, що дозволяє в деяких випадках встановлювати радіообмін на дистанціях більше ста метрів на відкритому простірі(пристрії класу 1). Однак, треба зауважити, зо звичайні широко розповсюджені мобільні прилади, що використовують Bluetooth, здатні вести радіообмін лише на дистанціях 1-10 метрів (пристрії класів 2 та 3). Пропускна здібність змінювалась протягом версій стандарту. В версія 1 та 2 для передачі даних використовується лише канал зв’язку Bluetooth, специфікації версій 3 та 4 дозволяють комбіновану передачу даних із допомогою Wi-Fi. Найбільша пропускна здібність самого каналу Bluetooth досягнена в специфікації версії 2.1 і становлює 3 Мбіт/с. \todo{ref bt spec 2.1}

Група пристріїв в мережі Bluetooth зветься piconet. Мережа pcionet - це ad-hoc мережа. Один з пристроїв завжди є координатором мережі, наступні пристрої під’єднуються до мережі. При цьому, роль координатора може переходити від одного пристроя до іншого. Один координатор здатен підтримувати до 7 пристроїв в мережі.

Bluetooth Low Energy (Bluetooth LE) - це нова версія стандарту Bluetooth, розробка якого була почата  компанією Nokia під назвою WiBree. В 2010 році Bluetooth LE став частиною нової, четвертої, версії основної спеціфікації. Bluetooth LE призначена скоротити потреби енергії і зменьшити вартість Bluetooth-рішень, зберігаючаи при цьому такуж дальність дії, як і у класичному Bluetooth. Пропускна спроможність Bluetooth LE, однак, меньша ніж у Bluetooth.

% paragraph bluetooth_bluetooth_low_energy (end)

\paragraph{Wi-Fi} % (fold)
\label{par:wi_fi}

Wi-Fi - це одна з найросповсюдженіших технлогій бездротового цифрового зв’язку. Wi-Fi призначена для поєднання різноманітних цифрових пристроїв у локальну мережу через бездротовий канал зв’язку. 

Розробка стандарту проводиться у робочій групі IEEE 802.11 за підтримкою організації Wi-Fi Alliance. Перша версія стандарту була опублікована у 1997 році. У подальшому, робочую групою було опубліковано декілька десятків виправлень та доповнень до базового стандарту і активна розробка продовжується.

Для зв’язку в технології Wi-Fi використовується ISM диапазон радіочастот 2,4 ГГц, а також в диапазоні 5 ГГц. Дальність зв’язку порізнюється залежно від використаних антен та характеристики оточуючого простіру. У загальному випадку, дальність може сягати 100 метрів на відкритому простірі і 35 метрів - у приміщені. Пропускна здібність неодноразово підвищувалась завдяки введенню нових стандартів. Стандарт IEEE~802.11g-2003 дозволяє досягти пропускної здібності 54 Мбіт/с, IEEE~802.11n-2009 - 150 Мбіт/с (600 Мбіт/с при використанні 4 потоків передачі). Корисна пропускна здібність залежить від вищих рівней мережевого стеку. Кількість пристроїв залежить від режиму роботи мережі: в інфраструктурному режимі - 2007, в ad-hoc режимі - необмежено.

% paragraph wi_fi (end)

\paragraph{UWB} % (fold)
\label{par:uwb}

UWB - це набор стандартів бездротових персональних радіомереж із високою пропускною здатністю - HR-WPAN (High Rate Wireless Private Area Network).

Розробка стандарту проводилася робочую групою IEEE~802.15.3 за підтримкою організацій UWB Forum та WiMedia Alliance. У 2003 році робочою групою був опублікований стандарт IEEE~802.15.3-2003 що описував MAC та PHY рівні для HR-WPAN. У подальшому в 2005 та 2009 роках були опубліковані доповнення до стандарту. У 2009-2010 роботи по розробці стандарту було припинено і дії організації WiMedia Alliance було припинено.

У публікаціях, що були видані протягом 2002-2009 років, висловлюються великі сподівання щодо UWB, оскільки стандарт обіцяв пропускну спроможність від 110 Мбіт/с до 2 Гбіт/с на відстанях до 10 метрів. Але, на цей час стандарт никим не підтримується і майбутнє стандарту не відомо.

% paragraph uwb (end)

\paragraph{\iee} % (fold)
\label{par:iee}

\iee - це стандарт для бездротових персональних радіомереж із низькою пропускною здібністю – LR-WPAN (\engtxt{Low Rate Wireless Private Area Network}). 

Розробка стандарту проводиться робочою групою \iee. Перша версія стандарту була опублікована в 2003 році. Остання ревізія стандарту була опублікована у 2011 році. 

Стандарт лежить в основі спеціфікацій технологій ZigBee, WirelessHART, MiWi, ISA100.11a. Підтримка \iee заявлена в спеціфікації 6LowPAN. \todo{links}

Для зв’язку в технології \iee використовується ISM диапазони радіочастот 868 МГц, 915 МГц та 2,4 ГГц. Декілька інших диапазонів лицензовані у Японії та Китаї. Дальність роботи може сягає 10-100 метрів і залежить від характеристик використаного радіопередавача. Пропускна здібність сягає 250 кбіт/с у диапазоні 2,4 ГГц. Кількість пристроїв в мережі обмежена використаним режимом адресації, ніжня планка становлює 65000 пристроїв.

Окермо слід зауважити існівання додатку до стандарту IEEE 802.15.4a-2007 , який додає підтримку нового PHY рівню на базі технології UWB. Згідно до цього додатку, номінальна пропускна здібність у диапазоні 2,4 ГГц становить 1 Мбіт/с, а в диапазонах UWB - від 851 Кбіт/с до 27,24 Мбіт/с. \todo{link to overview} Декілька компаній почали виробництво радіомодулів, що використовують додаток до стандарту.

% An Overview of the IEEE 802.15.4a Standard.pdf

% paragraph iee (end)

\todoi{інші технології?}

\subsection{Зведне порівняння технологій бездротового звя’зку}

В таблиці \ref{tbl:wireless_tech_comparison} наведено зведне порівняння основних розбіжностей технологій, що були оглянуті вище у підрозділах \labelcref{par:bluetooth_bluetooth_low_energy,par:wi_fi,par:uwb,par:iee}. Кожна технологія базується на стандарті IEEE \todo{інші технології?}. Wi-Fi та UWB забеспечують більшу пропускну здатність, ніж Bluetooth та \iee. Wi-Fi призначений для встановлення бездротових локальних мереж. UWB, Bluetooth та \iee призначені діяти в WPAN-мережах.


\begin{table}[htbp]
\caption{Зведне порівняння оглянутих технологій бездротового зв’зку}
\hyphenpenalty=10000
\begin{tabular}{|p{0.18\textwidth}|p{0.175\textwidth}|p{0.175\textwidth}|p{0.175\textwidth}|p{0.175\textwidth}|}
\hline
                                       & Bluetooth               & Wi-Fi                                                  & UWB                     & IEEE 802.15.4            \\ \hline
Специфікація                           & IEEE 802.15.1 	         & IEEE 802.11g                                           & IEEE 802.15.3           & IEEE 802.15.4            \\ \hline
Частотний діапазон, ГГц                & 2,4                     & 2,4; 5                                                 & 3,1-10,6                & 0,868; 0,915; 2,4        \\ \hline
Номінальна пропускна здібність, Мбіт/с & 1-3                     & 54-600                                                 & 110-2000                & 0,25                     \\ \hline
Дальність, м                           & 1-100                   & 35-100                                                 & 1-10                    & 10-100                   \\ \hline
Кількість каналів                      & 79                      & 14                                                     & 1-15                    & 27                       \\ \hline
Базова топологія мережі                & Piconet                 & BSS                                                    & Piconet                 & Зірка                    \\ \hline
Максимальна кількість вузлів           & 8                       & 2007                                                   & 8                       & Більш 65000              \\ \hline
Розширена топологія мережі             & Scatternet              & ESS                                                    & Peer to Peer            & Mesh, cluster tree       \\ \hline
Механізм співіснівання                 & Адаптивна зміна частоти & Дінамічний вибір частоти, контроль потужності передачі & Адаптивна зміна частоти & Дінамічний вибір частоти \\ \hline

\end{tabular}

\label{tbl:wireless_tech_comparison}

\end{table}


\subsection{Висновки до розділу}

В цьому розділі були наведені відомості про системи медіа фасадів, були розгялнуті їх задачі і сценарії використання. 

Серед інших типів систем медіа фасадів був окремо виділений тип ad-hoc медіа фасадів. Системи цього типа характеризуються розподіленим виконання задач візуалізації та взаємодії із користувачем. Росподілені вузли для функціонування у рамках цілої системи повинні бути об’єднані в єдину мережу. Для забезпечення мобільності вузлів в цілях покращенної взаємодії з користувачем, полегшеного розгортання системи, тощо, було запропоновано використати бездротові радіомережі.

Через свої особливості, системою ad-hoc медіа фасаду виставляються наступні вимоги: \todo{}

Для виконання перерахованих вище вимог, були відібрані та оглянуті деякі технолгії бездротового радіозв’зку, а саме Bluetooth, Wi-Fi, UWB, \iee. Було проведено зведне порівняння відібраних технологій. По ітогам порівняння, пропонується використовувати технологію на базі стандарту \iee для побудови радіомережі у системі ad-hoc медіа фасаду. 


% section аналіз_сучасного_стану_проблеми_контроля_елементів_медіафасадів (end)

\section{Аналіз стандарту \iee}

В розділі~\ref{sec:1} для побудування радіомережі в системі ad-hoc медіа фасаду була вибрана технологія радіомереж на базі стандарту \iee. Для того, щоб можно було приступити до розробки протоколу прикладного рівня, необхідно розглянути можливості, що забеспечуються стандартом \iee.

У цьому розділі розглядається стандарт \iee, можливості що ним підтримуються та режими роботи, що можуть бути використані при розробці протоколу управління елементами індикації медіафасаду. 


\subsection{Стандарт \iee}
\label{sub:ieee:standard}


Стандарт \iee зосереджується на низько швидкісному, низько складному, енерго-ефективному бездротовому радіозв’язку серед пристроїв. Деякі з найбільш важливих особливостей стандарту, що можуть бути використані при розробці протоколу управління елементами індикації медіа фасаду, є:
\begin{itemize}
	\item підтримка мережевих топологій зірка та Peer-to-Peer;
	\item використання алгоритму CSMA-CA (\engtxt{Carrier Sense Multiple Access with Collision Avoidance} - множинний доступ з контролем несучої і униканням колізій);
	\item підтримка необов’язкового режиму доставки у реальному часі із використанням GTS (Guaranteed Time Slots – гарантованих  часових інтервалів);
	\item низькі вимоги до рівня споживання енергії;
	\item контроль споживання енергії за допомогою LQI (Link Quality Indication – показник якості зв’зку) та ED (Energy Detection – виявлення енергії).
\end{itemize}

Типово, пристрої \iee працюють в персональному просторі розміром 10 метрів чи менше. Але, робоча дальність залежить від обраного апаратного забезпечення і може досягати десятків та сотень метрів. \todoi{что конкретно говорит стандарт}

Сдантартом підримується декілька різних диапазонів радіочастот та форматів модуляції. Перша версія стандарту зазначала підтримку трьох диапазонів 2,4 ГГц, 915 МГц та 868 МГц із групи диапазонів ISM (Industrial, Scientifical and Medical radio bands – промислові, наукові та медичні діапазони радіочастот), який не підлягаю ліцензуванню у більшості країн. Подальші версії стандарту додали інші диапазони та методи модуляції. Повний список, згідно до поточного стандарту, наведено у таблиці \todoi{таблица из стандарта, страница 163}.

\todoi{freq bands and data rates}

Диапазони частот поділені на канали. Нумерація каналів проводитья із допомогою номерів каналів та страниць каналів. Диапазони, що були використані у першій версії стандарту віднесені до страниці каналів 0. До цієї страниці відносяться 27 каналів: 
\begin{itemize}
	\item 1 канал в диапазоні 868 МГц $(k = 0)$;
	\item 10 каналів в диапазоні 915 МГц $(k = 1, \cdots, 10)$;
	\item 16 каналів в диапазоні 2,4 ГГц $(k = 11, \cdots, 26)$.
\end{itemize}

\iee підтримує два типи пристроїв: FFD (Full-Function Device – повнофункціональний пристрій) та RFD (Reduced-Function Device – пристрій із зниженою функціональністю). RFD пристрої призначені для використання у дуже простих випадках і здібні асоціюватися лише із одним FFD. Це дозволяє втілити RFD пристрій при дуже обмеженому обсязі пам’яті, обчислювальної потужності та запасів енергії. Кожна мережа повинна містити як найменьш один FFD пристрій. 

Залежно від прикладної задачі, \iee мережа може мати топологію зірка чи Peer-to-Peer. 

Обидва типи мереж повинні мати один спеціальний пристрій – PAN координатор. PAN координатор створює мережу, дозволяє іншим пристроям асоціювати себе із мережею та контролює доступ пристроїв до мережі у випадку використання режиму роботи із маячками (beacon-enabled mode). Тільки FFD пристрій може стати PAN координатором.

Головна різниця між мережевими топологіями полягає у напрямках комунікації, що підтримуються. Мережа-зірка підтримує комунікацію лише між PAN координатором та асоційованим пристроєм. Peer-to-Peer мережа дозволяє довільні сполучення між усіма асоційованими пристроями.

Стандарт \iee визначає два режими роботи:
\begin{itemize}
	\item режим роботи без маячків (beacon-less mode) чи безслотовий (unslotted);
	\item режим роботи із маячками (beacon-enabled mode) чи слотовий (slotted).
\end{itemize}

Розуміння цих механізмів допоможе нам розробити мережеві протоколи.


\paragraph{Режим роботи без маячків}

CSMA – це алгоритм, який використовується для контролю часу передачі в мережі, яка складається із множини пристроїв (\figref{fig:csma-ca}).

\begin{figure}[bth]
	\centering
	\includegraphics[width=0.7\textwidth]{img/csma-ca.pdf}
	% \missingfigure{csma-ca}
	\caption{\label{fig:csma-ca}Безслотовий алгоритм \csma, спрощена версія.}
\end{figure}

Пристрої використовують контроль несучої для того, щоб визначити період часу, коли канал «вільний» і протягом котрого можливо передати інформацію. Таким чином пристрій намагається уникнути колізії. Звісно, цілком можливий випадок, коли два пристрої вирішать почати передачу  одночасно протягом одного  «вільного» періоду. Для того, щоб зменшити ймовірність цього випадку, використовується механізм випадкових періодів затримки (random back-off delay) перед початком передачі. Випадкові затримки збільшують ймовірність успішного несумісного захвату каналу одним пристроєм.

У мережі, яка діє в режимі без маячків, усі пристрої використовують безслотовий алгоритм \csma. В загальному випадку, періоди затримки різних пристроїв не синхронізовані один з одним.  Кожен пристрій починає відраховувати випадковий період затримки і передачу за бажанням. Всі пристрої конкурують один з іншим за право використання каналу зв’язку. 

\clearpage

\paragraph{Режим роботи із маячками}
\label{par:beacon:enabled:mode}

\iee визначає додатковий, необов’язковий режим роботи із маячками. Під час цього режиму роботи, усі передачі виконуються в рамках суперкадрів (superframes). 

Кожен суперкадр складається із чотирьох частин (\figref{fig:superframe}):

\begin{itemize}
	\item маячок;
	\item CAP (Contention Access Period – період конкурентного доступу);
	\item Необов’язковий CFP (Contention Free Period – період без конкурентного доступу);
	\item Необов’язковий період неактивності.
\end{itemize}

\begin{figure}[bth]
	\centering
	\includegraphics[width=\textwidth]{img/superframe.pdf}
	\caption{\label{fig:superframe}Схема суперкадру.}
\end{figure}

PAN координатор передає кадр-маячок на початку кожного суперкадру. Інші учасники мережі використовують отриманий маячок для того, щоб синхронізуватися із координатором. Також маячок використовується для доставки опису структури поточного суперкадру та іншої загальної інформації про мережу. 

Безпосередньо слідом за маячком починається період CAP. Протягом цього періоду усі асоційовані прилади в мережі використовують слотовий алгоритм \csma. Слотовий алгоритм \csma є модифікацією безслотового алгоритму. Пристрої так само конкурують за право передачі. Зміна полягає у наступному: якщо передача не може бути закінчена цілком до кінця періоду CAP, тоді вона взагалі не буде проведена протягом поточного періоду CAP. Замість того, вона буде відкладена до наступного. % Лише кадри підтверджень доставки та деяких інших спеціальних команд передаються без використання \csma.

Якщо PAN координатор вирішив на початку суперкадру, що  той повинен містити необов’язковий період CFP, тоді CFP починається після закінчення періоду CAP. Координатор поділяє період CFP на гарантовані часові інтервали (GTS). Якщо пристрій бажає передати інформацію протягом періоду CFP, він повинен отримати дозвіл на це від PAN координатора за допомогою службової команди GTS Request. Дозвіл від координатора отримується протягом періоду CAP. Якщо дозвіл отримано, пристрій має виключне право на використання призначеного йому інтервалу GTS. Таким чином, протягом інтервалу GTS алгоритм \csma не використовується. Але, звісно, пристрій зобов’язаний дотримуватися границь інтервалу GTS. 

Необов’язковий період неактивності може бути назначений PAN координатором для того, щоб пристрої могли перейти до сплячого енергозберігаючого режиму. Період неактивності починається після періоду CFP (чи CAP, якщо CFP у поточному суперкадрі відсутній) і завершується із завершенням поточного суперкадру.
Негайно із завершенням поточного суперкадру починається наступний суперкадр. 

\paragraph{Оцінка пропускної здатності}
\label{par:throughput:evaluation}

Декілька досліджень було проведено для оцінки характеристик мереж на основі стандарту \iee, таких як максимальна пропускна здатність, мінімальна та максимальна затримка доставки. Дослідники використовували різноманітні підходи: теоретичні розрахунки, експерименти за допомогою симуляції математичних моделей мереж чи за допомогою справжніх мереж.

Безслотовий алгоритм \csma та режим роботи без маячків у мережах стандарту \iee був досліджений у~\cite{thoroughput:analysis:unslotted:ieee}. Цій дослід стверджує, що режим роботи без маячків має меншій рівень накладних витрат, ніж режим роботи із маячками, і тому дозволяє досягти найбільшої пропускної здатності. У досліді пропонуються аналітичні формули для оцінки значень пропускної здатності та затримки доставки. Коректність запропонованих формул була перевірена експериментально.

Дослід~\cite{thoroughput:analysis:unslotted:ieee} пропонує оцінювати корисну пропускну здібність як функцію від розміру корисного навантаження кадру (\figref{fig:throughput_graph}). За допомогою розрахунків встановлено, що верхня межа корисної пропускної здібності в мережі, яка використовує 16 біт для адресування, сягає рівню 151 кбіт/с із відключеним механізмом підтверджень чи рівню 139 кбіт/с – із включеним. Із зменшенням розміру корисного навантаження кадру, корисна пропускна здібність також зменшується. Розмір заголовку кадру (і, відповідно, можливий розмір корисного навантаження) змінюється відповідно до обраного режиму адресування та параметрів безпеки. Тобто, максимальна корисна пропускна здібність залежить від обраних параметрів мережі.

\begin{figure}[bth]
	\centering
	\includegraphics[width=0.7\textwidth]{img/throughput_graph.png}
	% \missingfigure{}
	\caption{\label{fig:throughput_graph}Корисна пропускна здібність як функція корисного навантаження, режиму адресування та настройок підтвердження доставки (ACK).}
\end{figure}

Експерименти, що були проведені у досліді~\cite{thoroughput:analysis:unslotted:ieee}, показують стабільну різницю між оціненою та експериментально виміряною корисною пропускною здібністю. Виміряна корисна пропускна здібність була десть на 11\% нижче за очиковану, тобто максимально досягнута пропускна здібність становила біля 123 кбіт/с.

Протягом практики мною були проведені власні експерименти по вимірюванню корисної пропускної здібності мереж \iee. Вимірювальні пристрої були побудовані на базі Arduino Leonardo та трансиверів MRF24J40MA. Експериментально виміряна корисна пропускна здібність встановила 110 кбіт/с. Цей результат добре відповідає результатам, що були отримані у~\cite{thoroughput:analysis:unslotted:ieee}.

Слотовий алгоритм \csma та режим роботи із маячками у мережах стандарту \iee був досліджений в ~\cite{simulation:study:slotted:ieee} та в ~\cite{gts:allocation:analysis}. Серед іншого, ці досліди встановлюють взаємозв'язок між порядком суперкадра (superframe order, розмір суперкадра) та максимальною пропускною здібністю. Досліди стверджують, що пропускна здібність сягає свого здійснимого максимуму, якщо порядок суперкадру дорівнює 3 або 4. При більших порядках, пропускна здібність зменшується.

Аналіз та порівняння слотового та безслотового алгоритмів \csma в стандарті \iee було проведено в ~\cite{analysis:slotted:unslotted}. У висновках досліду зазначається, що безслотовий алгоритм \csma  показує більшу максимальну пропускну здібність у порівнянні із слотовим алгоритмом \csma.

Але, цей висновок не є підставою для того, щоб вважати режим роботи із маячками, який використовує слотовий алгоритм \csma, повністю непотрібним. Цей режим пропонує дуже важливі особливості, які можуть бути використані для розробки мережевих протоколів специфічних для прикладної програми.

\section{Мережевий протокол для системи медіа фасаду}
\label{sec:network:protocol:amf}


Цей підрозділ присвячений розробці мережевого протоколу для системи медіа фасаду. Будуть проаналізовані архітектура та сценарії використання, запропоновані рішення щодо розроблюваного протоколу, а також буде розглянута окрема оптимізація протоколу.

\subsection{Архітектура системи}
\label{sub:system:arch}

Перед усім, розглянемо архітектуру системи ad-hoc медіа фасаду (\figref{fig:sys_arch}). 

\begin{figure}[bth]
\centering
\adjustbox{max width=\textwidth}{
	\input{img/sys_arch}
}
\caption{\label{fig:sys_arch}Загальна архітектура системи}
\end{figure}

Система поділяється на дві основні частини: Хост та Вузли візуалізації.

Вузли візуалізації виконують, перед усім, фактичну роботу по візуалізації, а також дозволяють користувачам системи взаємодіяти із системою. Вузли можуть мати необов’язкові сенсори, які можуть використовуватися системою для визначення положення Вузлів та інших видів взаємодії із користувачами.

До складу Хоста входять Хост-контролер, Хост-додаток та сенсори. Сенсори на стороні Хоста використовуються для визначення положення Вузлів. Хост-додаток проводить загальне керування візуалізацією, системою. Хост-контролер використовує інформацію від сенсорів для того, щоб розподілити керівні команди від Хост-додатка на окремі завдання для Вузлів. Хост-контролер проводить оновлення візуалізації, посилаючи необхідні команди Вузлам через канал зв’язку.

Блок Віддалений додаток представляє на схемі будь яку іншу систему, яка під’єднана до системи медіа-фасаду, але не приймає активної участі в процесі візуалізації. Це може, наприклад, бути деякий інтерфейс користувача для адміністрування системи, Web-додаток, сусідня система візуалізації, тощо.

\subsection{Зв’язок архітектури системи та мережевого протоколу взаємодії}

Згідно із запропонованою в підрозділі~\ref{sub:system:arch} архітектурою системи, Вузли візуалізації не підтримують зв’язок один з одним заради цілей прикладної системи, візуалізації. Вузли спілкуються лише із Хост-контролером, щоб отримати оновлення візуалізації, повідомити інформацію з сенсорів. Однак, спілкування між Вузлами заради цілей управління мережею знаходиться поза рамками запропонованої архітектури і не забороняється.

\paragraph{Випадки трафіку}
\label{par:traffic:cases}

Виходячи із наведеної в пункті~\ref{sub:system:arch} архітектури системи, можна виділити два види мережевого трафіку в системі:
\begin{itemize}
	\item трафік від Хоста к Вузлам;
	\item трафік від Вузлів к Хосту.
\end{itemize}

Обидва види не однорідні і складаються с команд та даних різного роду, розміру та вимог до QoS (Quality of Service – якість обслуговування). QoS – це гарантії від мережі до прикладної програми щодо якості характеристик каналу зв’язку: пропускна здібність, час доставки.

Трафік від Хоста к Вузлам складається, перед усім, з команд оновлення візуалізації. Ці команди змінюють візуальний стан Вузлів. Залежно від типу, природи візуалізації, до цього виду трафіка можуть пред’являтися різні вимоги щодо часу і гарантій доставки. Але, можна очікувати, що команди візуалізації будуть складати основну частину всього мережевого трафіку.

Одним з найпростіших для виконання механізмів оновлення візуалізаціє є наступний: усі Вузли оновлюються часто і одночасно, так само, як окремі пікселі на моніторі оновлюються одночасно при зміні кадру. При цьому механізмі, команди на оновлення відсилаються часто. В такому випадку, витрата однієї команди на оновлення буде менш помітна і менш впливова на загальний опит користувача. Більш важливою є доставка  команд оновлення у встановлені рамки ніж надійна доставка. Якщо команда запізнюється із доставкою – її все одно можна відкидати, бо вона застаріла і скоро прийде наступна. Цей підхід використовується в існуючих протоколах потокової передачі медіа-контенту. Звісно, якщо кількість відкинутих чи втрачених пакетів завелика, тоді якість сигналу падає аж до рівню повної непридатності. Таким чином, рівень допустимої кількості втрат залежить від конкретної прикладної задачі.

Крім команд оновлення візуалізації, трафік від Хоста к Вузлам може також містити інші види керуючих команд. Наприклад, Хост може використовувати модель Запит-Відповідь для отримання інформації з Вузлів: інформація з сенсорів на Вузлах, стан батареї, тощо. Можна очікувати, що цей тип трафіку має менші вимоги до QoS.

Основною складовою трафіку від Вузлів к Хосту є відповіді Вузлів на запити Хоста чи дані від сенсорів на Вузлах. Цей вид трафіку буде сягати значної долі у загальному мережевому трафіці у випадку, якщо використовується модель Запит-Відповідь, чи якщо сенсори на Вузлах створюсь багато інформації, яка часто відсилається до Хоста.

Обидва види трафіка також використовуються для підтримки мережі: створення мережі, асоціювання та де асоціювання пристроїв, синхронізація, маршрутизація, тощо.

\paragraph{Мережева топологія}

Вибір мережевої топології завжди залежить від поставленої прикладної задачі. Походячи із описаних в пункті~\ref{par:traffic:cases} видів трафіку, найбільш простою для використання буде топологія зірка. Згідно до архітектури системи (пункт~\ref{sub:system:arch}), Вузли спілкуються лише із Хостом, який, в такому випадку, є PAN координатором мережі.

Використання інших мережевих топологій можливо. Але підвищення складності може негативно позначитися на QoS характеристиках мережі.

\paragraph{Сценарії роботи мережевого протоколу}
\label{par:network:protocol:scenarios}

В пункті~\ref{par:traffic:cases} був наведений опис двох можливих видів трафіку. В цьому пункті ми розглянемо два різні сценарії можливих рівнів трафіку і запропонуємо варіації мережевого протоколу для них.

Як вже зазначалося вище, ми очікуємо витрачати основну частину пропускної здібності мережі на оновлення візуалізації, тобто на трафік від Хоста к Вузлам. Припустимо, що це очікування вірне. Тоді, маємо два можливі сценарії рівня трафіку від Вузлів к Хосту:
\begin{itemize}
	\item незначний чи відсутній трафік;
	\item значний трафік.
\end{itemize}


\paragraph{Незначний чи відсутній трафік від Вузлів к Хосту}
\label{par:low:nthn}

Цей сценарій має місце у випадку, коли Вузли візуалізації не обладнані сенсорами чи сенсори оновлюють свої показники не часто. Керівні команди так саме невеликі і рідкісні. Це можливе у випадку, коли не використовується модель Запит-Відповідь та коли склад мережі змінюється не часто.

Для цього сценарію я пропоную використати режим роботи мережі без маячків. Кожен пристрій в мережі може почати передачу в будь коли, всі пристрої конкурують за доступ до каналу зв’язку. 

Як було зазначене вище у пункті~\ref{par:throughput:evaluation}, режим роботи без маячків дозволяє досягти найбільшої пропускної здібності мережі. Пуск, настройка та керування мережею простіші за режим роботи із маячками. Трафік від Хоста к Вузлам займає основну частину усього трафіку, тому можна очікувати, що конкурентні конфлікти доступу до каналу зв’язку будуть рідкісні і не впливові.

З іншого боку, якщо попередня оцінка рівню трафіка від Вузлів к Хосту не вірна і, насправді, рівень набагато вище, тоді пропускна здібність мережі буде зменшена через конкурентні конфлікти доступу. Таким чином, в приведеному сценарії є дуже важливою правильна попередня оцінка умов роботи системи.

Другий недолік запропонованого рішення полягає в процедурі асоціації приладів при підключенні до мережі. Асоціація при режимі роботи без маячків наступна: пристрій, що хоче приєднатися до мережі, відсилає команди Beacon Request (запит маячка) на кожній з доступних частот і очікує відповіді від PAN контролера. PAN контролер, отримавши  у свою чергу Beacon Request, вирішує, чи дозволити пристрою приєднатися до мережі і відповідає на запит. Як можна бачити, пристрої повинні активно розшукувати мережу, до якої можна приєднатися. Процедура активної асоціації пристроїв збільшує трафік від Вузлів к Хосту і, через це, зменшує QoS в мережі. Якщо склад мережі змінюється часто, нові Вузли будуть проводити активну асоціацію і негативно впливати на роботу мережі.

\paragraph{Значний трафік від Вузлів к Хосту}
\label{par:low:ntht}

Цей сценарій має місце у випадку, коли Вузли візуалізації обладнані сенсорами, які часто  оновлюють свої показники, або коли склад мережі змінюється часто.

Для цього сценарію я пропоную використати режим роботи мережі із маячками та GTS.

Як було зазначене вище у пункті~\ref{par:beacon:enabled:mode}, режим роботи із маячками дозволяє поділити суперкадр на два періоди: CAP та CFP. Я пропоную відвести основну долю суперкадру під CFP, протягом якого Хост відправлятиме команди оновлення візуалізації та іншу критичну інформацію. Залишок суперкадру відводиться під період CAP, протягом якого діють і Хост, і Вузли. CAP відводиться для некритичного трафіку в обидві сторони, доступ до каналу зв’язку проводиться на конкурентній основі. 

Виключне використання періоду CFP Хостом дозволяє ввести гарантії на QoS мережі, планувати пропускну здатність та часи затримок. 

Процедура асоціації нових Вузлів також дещо простіша. Оскільки в мережі постійно на початку кожного суперкадру відправляються маячки із інформацією про мережу, новий Вузол може не проводити активну асоціацію. Замісць цього, він повинен пасивно прослуховувати кожну з доступних радіочастот, щоб отримати маячок на початку суперкадра. Отримавши маячок, новий Вузол може почати спілкування із Хостом протягам періоду CAP. Така пасивна асоціація забезпечує непереривання передачі важливого трафіка.

Режим роботи із маячками може бути додатково використаний для синхронізації часу між Вузлами та Хостом. Така часова синхронізація може буде використана в деяких стратегіях оновлення візуалізації.

До недоліків запропонованого режиму належить, перш за усе, необхідність додаткового налаштування параметрів суперкадру. Як було показано в пункті \ref{par:throughput:evaluation}, при зменшенні розміру кадру, зменшується пропускна здібність. Але, можна очікувати, що трафік від Вузлів до Хоста складатиметься саме із невеличких кадрів. Враховуючи велику кількість Вузлів в мережі, а також те, що частина суперкадру відведена під CFP, ймовірність колізій під час CAP тільки збільшується, а пропускна здібність падає. Тобто, система повинна бути готовою до затримок чи втрат доставки трафіку від Вузлів к Хосту. 

Відношення між розмірами CFP та CAP в такому випадку є найбільш впливовим параметром для регулювання якості та надійності доставки. Це рішення є компромісним.

\paragraph{Мультиплексування оновлення візуалізації}

У пункті \ref{par:traffic:cases} був розглянутий один з можливих механізмів оновлення візуалізації, при якому усі Вузли оновлюються разом і часто. При цьому механізмі, команди оновлення візуалізації  потрібно відправляти Вузлам на кожному «візуальному кадрі», тобто об’єм даних, що необхідно передати, є стабільно великим. «Наївна» реалізація використовуватиме відправлення окремих мережевих кадрів окремим вузлам.

Максимальний розмір кадру згідно до стандарту \iee становить 127 байт ~\cite{ieee:802:15:4:2011}. Деяку долю кадру займає MAC заголовок і контрольні поля. Як вже згадувалося в пункті \ref{par:throughput:evaluation}, заголовок має змінний розмір, який залежить від використаного режиму адресування та параметрів безпеки. У випадку, якщо ні поля безпеки, ні поля адресування не зазначені у заголовці, тоді розмір корисного навантаження кадру сягаю свого максимуму в 122 байти. Але, корисність протоколів, що зовсім не застосують адресування, обмежена, тому розмір корисного навантаження в 114-120 байтів є більш реалістичним. Невикористання повністю доступного простору для корисного навантаження призводить до погіршення пропускної здібності.

Розглянемо випадок, коли розмір окремої команди оновлення візуалізацію менший за максимальний розмір корисного навантаження кадра і, наприклад, становить 10 байт. Це припущення вірне у випадку, коли Вузол візуалізації обладнаний простими засобами і є аналогом лише декількох пікселей. Якщо в такій системі буде використаний механізм оновлення візуалізації, зазначений на початку пункту, із «наївною» реалізацією, яка потребує відправки окремих команд окремим Вузлам, тоді більшість кадрів будуть замалими для досягнення великої пропускної здібності.

Команди оновлення візуалізації для окремих Вузлів можна об’єднати разом і відправити одним мережевим кадром, тобто, команди можна мультиплексувати. Цей підхід дозволяє більш ефективно використати доступний простір під корисне навантаження і досягти більшої пропускної здібності. Такі мультиплексовані команди повинні бути відправлені до Вузлів за допомогою широкомовного кадру.

Мультиплексування може бути використане для обох сценаріїв, які були описані в пункті \ref{par:network:protocol:scenarios}.

\section{Симуляція}

\subsection{Огляд симуляторів мереж}

Існує декілька симуляторів для комп'ютерних мереж. Надалі роглянемо варіанти и обремо один для використання.

\paragraph{ns}

ns - це симулятор мереж із дискритним часом подій, призначений для моделювання систем Інтернету із дослідницькою та навчальною ціллю. Симулятор росповсюджується під свободною ліцензією GNU GPLv2 і відкрито доступен для використання.

Актуальними на цей час є версії 2 та 3. 

Розробка версії 2 почалась у 1996 році, остання стабільна версія 2.35 була випущена у листопаді 2011 року. Розробниками була заявлена ціль випустити версію 2.36 наприкінці 2013 року \todo{ссилка http://nsnam.isi.edu/nsnam/index.php/Roadmap}. Нова версія призначена виправити деякі помилки, змінити скрипти для зборки, добавити декілька нових моделей. Але, взагалі розробка проєкт вважається основними розробниками закінченим.

Розробка версії 3 почалась у 2008 році. Розробники повністю відкинули старий кд і почали розробку з початку. Через те, не весь функціонал, що був підтриманий версією 2, присутній у версії 3. Версія зараз активно розроблюється. Остання версія 3.18 була опублікована у серпні 2013 року, наступна версія 3.19 запланована на грудень 2013 \todo{link}.  
% http://www.nsnam.org/wiki/index.php?title=Current_Development&oldid=8062

ns-3 має початкову підтримку мереж стандарту \iee. Серед найбільших недоліків є підтримка MAC рівнем лише безслотового \csma і, через те, лише режиму роботи без маячків. Опис стану підтримки мереж стандарту \iee симулятором може бути знайдений в розробітницькій  документації в репозитрії сирцевого коду \todo{ссілка, поточний стан lr-wpan в ns3 http://code.nsnam.org/tomh/ns-3-lr-wpan/file/60fda85f5921/src/lr-wpan/doc/lr-wpan.rst}.

ns-2 має кращу підтримку мереж стандарту \iee. Повністю підтримується режим роботи без маячків. В режимі роботи із маячками підтримується передача даних у періоді CAP. Стандартна версія бракує підтримки GTS. Але у 2011 році підтримка GTS була розроблена у рамках досліду \todo{link Implementation of the IEEE 802.15.4 module with CFP in NS-2}.

\paragraph{OMNeT++}

OMNeT++ - це компонентний фреймворк для побудування симуляторів мереж. Сам по собі, OMNeT++ надає лише інструменти та інфраструктуру для побудування симуляцій. Моделі мереж росповсюджуються у складі інших фреймворків та бібліотек. 

\todo {asdfasfsafafs}

\


\sectionnonum{Висновки}

% \bibliographystyle{IEEEtran}
% \providecommand*{\url}[1]{{#1}}
% \providecommand*{\BibUrl}[1]{\url{#1}}    
\urlstyle{same}
\bibliographystyle{ugost2003}
\bibliography{fp}

\ESKDappendix{}{Завдання на лабораторну роботу та приклад виконання}
\label{sec:app_a:labor:work:task}

\end{document}
